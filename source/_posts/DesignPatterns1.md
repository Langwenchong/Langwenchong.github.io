---
title: Javeå­¦23ç§è®¾è®¡æ¨¡å¼(1)--åˆ›å»ºå‹æ¨¡å¼
comments: false
top: false
date: 2021-10-21 08:47:21
tags: [è®¾è®¡æ¨¡å¼,java]
categories: 
	- [çŸ¥è¯†åˆ†äº«,å­¦ä¹ å¿ƒå¾—]
headimg: https://langwenchong.gitee.io/figure-bed/20211022212512.png
---

è®°å½•ç¿€ç¿€å¯¹23ç§è®¾è®¡æ¨¡å¼çš„æ€è€ƒä¸æ€»ç»“ğŸ“œï¼Œæœ¬ç« ä»‹ç»è®¾è®¡æ¨¡å¼æ¦‚è§ˆå’Œ5ç§åˆ›å»ºå‹æ¨¡å¼ã€‚

<!-- more -->

### æ¦‚å¿µä»‹ç»

é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“è®¾è®¡æ¨¡å¼ä¼ æˆçš„æ˜¯å‰è¾ˆå¯¹23ç§å¤æ‚åº”ç”¨åœºæ™¯ä¸‹æœ€ä¼˜ç­–ç•¥çš„ç»éªŒæ€»ç»“ï¼Œä»–ä»¬æ˜¯ä¸€ç§ç¼–ç¨‹çš„å¥—è·¯ï¼Œè€Œä¸æ˜¯è¯­æ³•è§„å®šï¼Œæˆ‘ä»¬åœ¨å­¦ä¹ åº”ç”¨23ç§è®¾è®¡æ¨¡å¼ä¹‹åå¯ä»¥æé«˜ä»£ç çš„å¯å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

æ€»ä½“ä¸Šæˆ‘ä»¬å¯ä»¥å°†23ç§è®¾è®¡æ¨¡å¼åˆ’åˆ†æˆä¸‰ç±»ï¼š

- åˆ›å»ºå‹æ¨¡å¼(5)ï¼šå•ä¾‹æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ã€åŸå‹æ¨¡å¼
- ç»“æ„æ€§æ¨¡å¼(7)ï¼šé€‚é…å™¨æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€è£…é¥°æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€ä»£ç†æ¨¡å¼
- è¡Œä¸ºå‹æ¨¡å¼(11)ï¼šæ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€ä¸­ä»‹æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€èŒè´£é“¾æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼ã€‚

ä»–ä»¬æ— ä¸€ä¾‹å¤–éƒ½åœ¨å°è¯•ä½¿å¾—æˆ‘ä»¬çš„ä»£ç ç¬¦åˆä»¥ä¸‹7å¤§åŸåˆ™ï¼š

|   åŸåˆ™åç§°   |                           åŸåˆ™å†…å®¹                           |
| :----------: | :----------------------------------------------------------: |
|   å¼€é—­åŸåˆ™   |                    å¯¹æ‰©å±•å¼€å‘ï¼Œå¯¹ä¿®æ”¹å…³é—­                    |
| é‡Œæ°æ›¿æ¢åŸåˆ™ |        ç»§æ‰¿å¿…é¡»ç¡®ä¿çˆ¶ç±»æ‰€æ‹¥æœ‰çš„çš„æ€§è´¨åœ¨å­ç±»ä¸­ä»ç„¶æˆç«‹        |
| ä¾èµ–å€’ç½®åŸåˆ™ |                è¦é¢å‘æ¥å£å˜æˆè€Œéé¢å‘å®ç°ç¼–ç¨‹                |
| å•ä¸€èŒè´£åŸåˆ™ |           æ§åˆ¶ç±»çš„ç²’åº¦å¤§å°ï¼Œå°†å¯¹è±¡è§£è€¦ï¼Œæé«˜å†…èšæ€§           |
| æ¥å£éš”ç¦»åŸåˆ™ |               è¦ä¸ºå„ä¸ªç±»å»ºç«‹ä»–ä»¬éœ€è¦çš„ä¸“ç”¨æ¥å£               |
|  è¿ªç±³ç‰¹åŸåˆ™  |             åªä¸ä½ çš„ç›´æ¥æœ‹å‹äº¤è°ˆï¼Œä¸è·Ÿé™Œç”Ÿäººè¯´è¯             |
| åˆæˆå¤ç”¨åŸåˆ™ | å°½é‡ä½¿ç”¨ç»„åˆæˆ–è€…èšåˆå…³è”å…³ç³»æ¥å®ç°ï¼Œå…¶æ¬¡æ‰è€ƒè™‘ä½¿ç”¨ç»§æ‰¿å…³ç³»æ¥å®ç° |

### åˆ›å»ºå‹æ¨¡å¼

{% note quote, ç”±äºç¯‡å¹…æœ‰é™ï¼Œæˆ‘å°†åˆ†æˆä¸‰ç« æ¥è®°å½•è®¾è®¡æ¨¡å¼çš„å­¦ä¹ ç¬”è®°ï¼Œæœ¬ç« å…ˆä»‹ç»5å¤§åˆ›å»ºå‹æ¨¡å¼ï¼Œä»–çš„ä¸»è¦å…³æ³¨ç‚¹éƒ½æ˜¯â€œå¦‚ä½•åˆ›å»ºå¯¹è±¡â€ï¼Œä¸»è¦ç›®æ ‡å°±æ˜¯è®©**å¯¹è±¡çš„åˆ›å»ºå’Œå¯¹è±¡çš„ä½¿ç”¨åˆ†ç¦»**ã€‚åœ¨åˆ›å»ºå‹æ¨¡å¼ä¸­ï¼Œä½¿ç”¨è€…ä¸éœ€å…³æ³¨åˆ›å»ºçš„ç»†èŠ‚ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç›¸å…³çš„å·¥ç¨‹æ¥å®Œæˆã€‚ %}

æˆ‘ä»¬é¦–å…ˆç»™å‡º5å¤§åˆ›å»ºå‹æ¨¡å¼çš„ç‰¹ç‚¹ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨å­¦ä¹ æ—¶éšæ—¶å°è¯•æ„Ÿæ‚Ÿä»–ä»¬çš„ç‰¹ç‚¹ï¼š

1. å•ä¾‹æ¨¡å¼ï¼š**æŸä¸ªç±»ä½¿èƒ½ç”Ÿæˆä¸€ä¸ªå®ä¾‹**ï¼Œè¯¥ç±»æä¾›äº†ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ä¾›å¤–éƒ¨è·å–è¯¥å®ä¾‹ï¼Œå…¶æ‹“å±•æ˜¯æœ‰é™å¤šä¾‹æ¨¡å¼
2. å·¥å‚æ–¹æ³•æ¨¡å¼ï¼šå®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºäº§å“çš„æ¥å£ï¼Œç”±å­ç±»å†³å®šç”Ÿäº§ä»€ä¹ˆäº§å“ï¼Œ**å³å±€é™äºä¸€ç§äº§å“çš„åˆ›å»º**
3. æŠ½è±¡å·¥å‚æ¨¡å¼ï¼šæä¾›ä¸€ä¸ªåˆ›å»ºäº§å“æ—çš„æ¥å£ï¼Œå…¶æ¯ä¸ªå­ç±»å¯ä»¥ç”Ÿäº§ä¸€ç³»åˆ—ç›¸å…³çš„äº§å“ï¼Œ**å³å¯ä»¥ç”Ÿäº§å¤šç§ä¸åŒçš„äº§å“**
4. å»ºé€ è€…æ¨¡å¼ï¼šå°†ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡æ‹†è§£æˆç›¸å¯¹ç®€å•çš„éƒ¨åˆ†ï¼Œç„¶åæ ¹æ®ä¸åŒéœ€è¦åˆ†åˆ«åˆ›å»ºä»–ä»¬ï¼Œæœ€åæ„å»ºè¯¥å¤æ‚å¯¹è±¡ã€‚
5. åŸå‹æ¨¡å¼ï¼šå°†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹ï¼Œé€šè¿‡å¯¹å…¶è¿›è¡Œå¤åˆ¶è€Œå…‹éš†å‡ºå¤šä¸ªå’ŒåŸå‹ç±»ä¼¼çš„æ–°å®ä¾‹

{% note info,

ä»¥ä¸Šçš„5ä¸­åˆ›å»ºå‹æ¨¡å¼ï¼Œé™¤äº†å·¥å‚æ–¹æ³•æ¨¡å¼å±äºç±»åˆ›å»ºå‹æ¨¡å¼ï¼Œå…¶ä»–çš„å…¨éƒ¨å±äºå¯¹è±¡åˆ›å»ºå‹æ¨¡å¼ã€‚

%}

#### å•ä¾‹æ¨¡å¼

å•ä¾‹æ¨¡å¼æ˜¯æ¯”è¾ƒç®€å•çš„ä¸€ç§åˆ›å»ºå‹æ¨¡å¼ï¼Œæˆ‘ä»¬ä»…ä»…é’ˆå¯¹å†…å­˜çš„å ç”¨ä»¥åŠçº¿ç¨‹å®‰å…¨æ€§ä¸¤æ–¹é¢æ¥å­¦ä¹ å•ä¾‹æ¨¡å¼ã€‚

é¦–å…ˆæˆ‘ä»¬è§‚å¯Ÿä»¥ä¸‹ä»£ç ï¼Œä»–è¢«ç§°ä¸º`é¥¿æ±‰å¼`å•ä¾‹ï¼ŒåŸå› æ˜¯ä¸€æ—¦ä»–è¢«åˆ›å»ºç«‹åˆ»ä¼šå ç”¨ç›¸å¯¹åº”å¤§å°çš„å†…å­˜ï¼Œç±»ä¼¼äº`é¥¿æ±‰`ç–¯ç‹‚åƒå†…å­˜ï¼š

```java
//é¥¿æ±‰å¼å•ä¾‹
public class Hungry {
    //å‡è®¾ä»–æœ‰ä»¥ä¸‹æˆå‘˜æ•°ç»„å˜é‡
    private byte[] arr1 = new byte[1024 * 1024];
    private byte[] arr2 = new byte[1024 * 1024];
    private byte[] arr3 = new byte[1024 * 1024];
    private byte[] arr4 = new byte[1024 * 1024];

    //æ„é€ å™¨ä¸ºç§æœ‰ï¼Œåªèƒ½è‡ªå·±åˆ›å»ºä¿è¯äº†å…¨å±€åªæœ‰ä¸€ä¸ªå®ä¾‹å³å•ä¾‹
    private Hungry() {

    }

    private final static Hungry h = new Hungry();

    //ä¸€ä¸ªå¯¹å¤–å…¬å¼€çš„æ¥å£æä¾›å•ä¾‹çš„è°ƒç”¨
    public static Hungry getInstance() {
        return h;
    }
}
```

ä¸Šé¢çš„ä»£ç æ˜¯ä¸€ä¸ªé¥¿æ±‰å¼å•ä¾‹çš„åˆ›å»ºç±»ï¼Œæ­¤æ—¶ä»–æœ‰4ä¸ªbyteæ•°ç»„ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªbyteæ•°ç»„éƒ½æ˜¯1MBå¤§å°ï¼Œé‚£ä¹ˆæ­¤æ—¶å½“é¥¿æ±‰å¼åˆ›å»ºåå°±å·²ç»å ç”¨äº†4MBçš„å†…å­˜äº†ï¼Œå³ä½¿æ­¤æ—¶å¯èƒ½è¿˜æ²¡æœ‰å…¶ä»–æ¨¡å—ä¼šè°ƒç”¨è¿™ä¸ªå•ä¾‹ï¼Œå› æ­¤æ­¤æ—¶çš„ä»£ç å¹¶ä¸å®Œç¾ï¼Œæœ€å¥½æ˜¯å†æœ‰å…¶ä»–æ¨¡å—è°ƒç”¨è¿™ä¸ªå•ä¾‹æ—¶æˆ‘ä»¬å†åˆå§‹åŒ–è¿™ä¸ªå•ä¾‹çš„å†…å­˜ç©ºé—´ã€‚å› æ­¤å‡ºç°äº†ä¸‹é¢çš„æ›´åŠ å®Œç¾çš„`æ‡’æ±‰å¼`å•ä¾‹åˆ›å»º:

```java
/æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼ï¼Œæœ‰åä¸ºDLCå•ä¾‹
public class Lazy {
    //å‡è®¾ä»–æœ‰ä»¥ä¸‹æˆå‘˜æ•°ç»„å˜é‡
    private byte[] arr1 = new byte[1024 * 1024];
    private byte[] arr2 = new byte[1024 * 1024];
    private byte[] arr3 = new byte[1024 * 1024];
    private byte[] arr4 = new byte[1024 * 1024];

    private Lazy() {
        System.out.println(Thread.currentThread().getName() + "ok");
    }


    //å…ˆåˆ›å»ºçš„ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰åˆå§‹åŒ–ï¼Œå› æ­¤æ­¤æ—¶læ˜¯nullä¸å ç”¨å¾ˆå¤§çš„ç©ºé—´
    private static Lazy lazy;

    public static Lazy getInstance() {
        //å½“å¤–éƒ¨æ¨¡å—è°ƒç”¨è¿™ä¸ªå•ä¾‹å¯¹è±¡æ—¶å†è¿›è¡Œåˆå§‹åŒ–
        if (lazy == null) {
            l = new Lazy();
        }
        return lazy;
    }


    //ä½†æ˜¯å¤šçº¿ç¨‹å¹¶å‘æƒ…å†µä¸‹æœ‰é—®é¢˜
    public static void main(String[] args) {
        for (int i = 0; i < 10; i ++) {
            new Thread(() -> {
                lazy.getInstance();
            }).start();
        }
    }
}
```

ä¸Šé¢çš„ä»£ç å°±æ˜¯`é¥¿æ±‰å¼`å•ä¾‹æ¨¡å¼çš„ï¼Œä½†æ˜¯ä»–åªåœ¨å•çº¿ç¨‹æƒ…å†µä¸‹å®Œç¾è¿è¡Œï¼Œæˆ‘ä»¬å‘ç°æ­¤æ—¶å¤šçº¿ç¨‹è¿è¡Œæ—¶ä¼šå‡ºç°é”™è¯¯ï¼ŒåŸå› æ˜¯å¤šä¸ªçº¿ç¨‹å¹¶å‘æƒ…å†µä¸‹ä¼šé€ æˆè®¿é—®å†²çªåŒæ—¶è°ƒç”¨getInstance()å¹¶ä¸”æ­¤æ—¶åœ¨æ¯ä¸€ä¸ªçº¿ç¨‹çš„è§†è§’ä¸‹léƒ½æ˜¯æœªåˆå§‹åŒ–çš„ï¼Œå› æ­¤è®¸å¤šçº¿ç¨‹è¿›è¡Œåˆå§‹åŒ–é€ æˆäº†é”™è¯¯ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨æºä»£ç çš„åŸºç¡€ä¸Šä¸Šé”ï¼Œä¿è¯å½“læœªåˆå§‹åŒ–æ—¶åªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹è¿™ä¸ªlè¿›è¡Œåˆå§‹åŒ–ï¼Œè€Œå…¶ä»–çš„çº¿ç¨‹åˆ™ç­‰å¾…åˆå§‹åŒ–åç›´æ¥è·å–å³å¯ï¼š

```java
public static Lazy getInstance() {
        //å½“å¤–éƒ¨æ¨¡å—è°ƒç”¨è¿™ä¸ªå•ä¾‹å¯¹è±¡æ—¶å†è¿›è¡Œåˆå§‹åŒ–
        if (lazy == null) {
            synchronized (Lazy.class) {
                //åŒé‡nullåˆ¤æ–­åŠ å¿«æ•ˆç‡
                if (lazy == null) {
                    lazy = new Lazy();
                }
            }
        }
        return lazy;
    }
```

æ­¤æ—¶ç†è®ºä¸Šæ²¡æœ‰é—®é¢˜äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿è¡Œä»¥åå‘ç°ç»“æœæ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿è¡ŒæˆåŠŸäº†å¦‚ä¸‹å›¾ï¼š

![](https://langwenchong.gitee.io/figure-bed/20211021181721.png)

è¿™æ˜¯å› ä¸ºæ¶‰åŠåˆ°äº†æŒ‡ä»¤é‡æ’çš„é—®é¢˜ï¼Œä¸€ä¸ªå®ä¾‹çš„åˆ›å»ºï¼ˆå³newçš„è¿‡ç¨‹)å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå­äº‹åŠ¡ï¼Œå®ƒæ˜¯ç”±ä¸€ä¸‹ä¸‰ä¸ªæ­¥éª¤å®Œæˆçš„ï¼š

1. åˆ†é…å†…å­˜ç©ºé—´
2. æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–å¯¹è±¡
3. å°†å¯¹è±¡å¼•ç”¨æŒ‡å‘é¢„åˆ†é…çš„ç©ºé—´

æ­£å¸¸æƒ…å†µä¸‹cpuå¹¶ä¸ä¼šçœŸæ­£çš„æŒ‰é¡ºåºæ‰§è¡Œï¼Œä»–ä¼šæœ‰æŒ‡ä»¤é‡æ’çš„æƒ…å†µï¼Œå³å¯èƒ½è¿™ä¸ªå®ä¾‹çš„åˆ›å»ºåˆå§‹åŒ–è¿‡ç¨‹çš„é¡ºåºæ˜¯132æˆ–è€…123ï¼Œæˆ–è€…213ã€‚é‚£ä¹ˆå‡è®¾æ­¤æ—¶çº¿ç¨‹Aå…ˆè°ƒç”¨äº†getInstance()æ–¹æ³•å‘ç°lazyæ˜¯nullï¼Œäºæ˜¯å°è¯•newè¿™ä¸ªå®ä¾‹ï¼Œä½†æ˜¯newçš„è¿‡ç¨‹ä¸­cpuè¿›è¡Œäº†æŒ‡ä»¤çš„é‡æ’é€ æˆæŒ‰ç…§132çš„é¡ºåºæ‰§è¡Œäº†ã€‚ä½†æ˜¯Aåˆšåˆšæ‰§è¡Œåˆ°3çš„æ­¥éª¤ï¼Œæ­¤æ—¶å·²ç»åˆ†é…äº†ç©ºé—´å¹¶ä¸”å…ˆå ç”¨äº†è¿™ä¸ªç©ºé—´ï¼Œè¿˜å·®æ„å»ºå®ä¾‹åˆ°è¿™ä¸ªå†…å­˜ç©ºé—´çš„æ­¥éª¤ã€‚æ°å·§æ­¤æ—¶çº¿ç¨‹Bä¹Ÿè°ƒç”¨äº†getInstance()æ–¹æ³•ï¼Œç”±äºsynchronizedæ˜¯æ ¹æ®ç©ºé—´æ˜¯å¦å·²ç»åˆ›å»ºå ç”¨æ¥åˆ¤æ–­çš„ï¼Œå› æ­¤æ­¤æ—¶è™½ç„¶å†…å­˜ç©ºé—´å†…è¿˜æ²¡æœ‰åˆ›å»ºåˆå§‹åŒ–çœŸæ­£çš„å®ä¾‹ï¼Œä½†æ˜¯ä»synchronizedè§†è§’æ¥çœ‹ç©ºé—´å·²ç»è¢«å ç”¨ï¼Œé‚£ä¹ˆçº¿ç¨‹Bå°±ä¼šè®¤ä¸ºæ­¤æ—¶lazyå·²ç»åˆ›å»ºå®Œæˆäº†äºæ˜¯èµ°returnè·¯çº¿ï¼Œå¯æ˜¯æ­¤æ—¶Aè¿˜å¹¶æ²¡æœ‰åˆå§‹åŒ–è¿™ä¸ªlazyå¯¹è±¡ï¼Œé€ æˆäº†çº¿ç¨‹Bè¿”å›çš„æ˜¯ä¸€ä¸ª`è™šæ— å®ä¾‹`é€ æˆå¼‚å¸¸ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦ä¿è¯çº¿ç¨‹åœ¨newè¿™ä¸ªå®ä¾‹æ—¶å¿…é¡»æ˜¯ç¦æ­¢æŒ‡ä»¤é‡æ’çš„ï¼Œåªéœ€è¦åœ¨åˆ›å»ºè¯­å¥ä¸­åŠ å…¥`volatile`å…³é”®å­—å³å¯ï¼Œå› æ­¤æœ€ç»ˆå®Œç¾çš„`æ‡’æ±‰å¼`å•ä¾‹ä»£ç å¦‚ä¸‹ï¼š

```java
//æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼ï¼Œæœ‰åä¸ºDLCå•ä¾‹
public class Lazy {
    //å‡è®¾ä»–æœ‰ä»¥ä¸‹æˆå‘˜æ•°ç»„å˜é‡
    private byte[] arr1 = new byte[1024 * 1024];
    private byte[] arr2 = new byte[1024 * 1024];
    private byte[] arr3 = new byte[1024 * 1024];
    private byte[] arr4 = new byte[1024 * 1024];

    private Lazy() {
        System.out.println(Thread.currentThread().getName() + "ok");
    }


    //å…ˆåˆ›å»ºçš„ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰åˆå§‹åŒ–ï¼Œå› æ­¤æ­¤æ—¶læ˜¯nullä¸å ç”¨å¾ˆå¤§çš„ç©ºé—´
    private static volatile Lazy lazy;

    public static Lazy getInstance() {
        //å½“å¤–éƒ¨æ¨¡å—è°ƒç”¨è¿™ä¸ªå•ä¾‹å¯¹è±¡æ—¶å†è¿›è¡Œåˆå§‹åŒ–
        if (lazy == null) {
            synchronized (Lazy.class) {
                //åŒé‡nullåˆ¤æ–­åŠ å¿«æ•ˆç‡
                if (lazy == null) {
                    lazy = new Lazy();
                }
            }
        }
        return lazy;
    }


    //æ­¤æ—¶å¤šçº¿ç¨‹æƒ…å†µä¸‹å°±æ²¡æœ‰é—®é¢˜äº†
    public static void main(String[] args) {
        for (int i = 0; i < 10; i++) {
            new Thread(() -> {
                lazy.getInstance();
            }).start();
        }
    }
}
```

{% note info,

æˆ‘ä»¬ä¸€å®šè¦æ—¶åˆ»æ³¨æ„å•ä¾‹æ¨¡å¼ä¸­å®ä¾‹åªèƒ½åˆ›å»ºä¸€æ¬¡ï¼Œæ‰€æœ‰çš„æ¨¡å—é€šè¿‡ä¸€ä¸ªå¯¹å¤–å¼€æ”¾çš„æ¥å£æ¥è°ƒç”¨è¿™ä¸ªå•ä¾‹è¿›è¡Œæ¥ä¸‹æ¥çš„æ“ä½œã€‚

%}

#### å·¥å‚æ¨¡å¼

å·¥å‚æ¨¡å¼ä¸»è¦ç‰¹ç‚¹å°±æ˜¯å®ç°äº†åˆ›å»ºè€…å’Œè°ƒç”¨è€…çš„åˆ†ç¦»ã€‚åœ¨ä»‹ç»å·¥å‚æ¨¡å¼ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸‹`ç®€å•å·¥å‚æ¨¡å¼`ï¼Œç®€å•å·¥å‚æ¨¡å¼å°±æ˜¯ç±»ä¼¼å·¥å‚çš„ä¸€ç§å¼€å‘æ¨¡å¼ï¼Œä½†æ˜¯ç‰¹å¹¶æ²¡æœ‰æ»¡è¶³`å¼€é—­åŸåˆ™`ã€‚è€Œå·¥å‚æ¨¡å¼å°±æ˜¯å¯¹ç®€å•å·¥å‚æ¨¡å¼çš„æ”¹è¿›ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆæ¥é€šè¿‡ä¸‹é¢çš„ä»£ç äº†è§£ä¸€ä¸‹ç®€å•å·¥å‚æ¨¡å¼ï¼š

{% tabs ç®€å•å·¥å‚æ¨¡å¼ %}
<!-- tab Consumer.java -->

```java
public class Consumer {
    public static void main(String[] args) {
        //åŸå…ˆå¦‚æœè¦è´­ä¹°ä¸¤è¾†è½¦ï¼Œéœ€è¦å¦‚ä¸‹å£°æ˜
        //éœ€è¦äº†è§£æ‰€æœ‰çš„å…ˆå…³çš„è½¦æ¥å£å’Œå®ç°ç±»
        //ç›¸å½“ä¸è‡ªå·±åˆ›å»ºè½¦
        //æ¯æ¬¡åˆ›å»ºå‚æ•°éƒ½è¦é‡æ–°å†å¡«å†™ä¸€æ¬¡
//        Car car1 = new WuLing(200, 30000, 2);
//        Car car2 = Tesla(280, 40000, 6);;
//
//        car1.name();
//        car2.name();

        //ç°åœ¨æˆ‘ä»¬åªéœ€è¦è°ƒç”¨CarFactoryçš„æ¥å£å³å¯è·å–
        //å¯ä»¥å’Œæ˜¾ç¤ºç”Ÿæ´»ä¸­çš„è´­ä¹°è½¦ç±»æ¯”
        //è½¦å·¥å‚è´Ÿè´£é€ è½¦ï¼Œæ¶ˆè´¹è€…åªä¹°è½¦
        //ç®€åŒ–äº†å¤šæ¬¡å¡«å†™é‡å¤å‚æ•°çš„è¿‡ç¨‹
        Car car3 = CarFactory.getCar("äº”è±");
        Car car4 = CarFactory.getCar("ç‰¹æ–¯æ‹‰");
        car3.name();
        car4.name();
    }
}
```

<!-- endtab -->
<!-- tab Car.java -->

```java
//æŠ½è±¡æ¥å£ï¼Œä¸å†™å…·ä½“çš„å®ç°
public interface Car {
    void name();
}
```

<!-- endtab -->

<!-- tab WuLing.java -->

```java
public class WuLing implements Car {
    @Override
    public void name() {
        System.out.println("äº”è±å®å…‰!");
    }

    private int weight;
    private int price;
    private int capacity;

    public WuLing(int weight, int price, int capacity) {
        this.weight = weight;
        this.price = price;
        this.capacity = capacity;
    }
}
```

<!-- endtab -->

<!-- tab Tesla.java -->

```java
public class Tesla implements Car {
    @Override
    public void name() {
        System.out.println("ç‰¹æ–¯æ‹‰!");
    }

    private int weight;
    private int price;
    private int capacity;

    public Tesla(int weight, int price, int capacity) {
        this.weight = weight;
        this.price = price;
        this.capacity = capacity;
    }
}
```

<!-- endtab -->

<!-- tab CarFactory.java -->

```java
public class CarFactory {
    public static Car getCar(String car) {
        if (car.equals("äº”è±")) {
            return new WuLing(200, 30000, 2);
        } else if (car.equals("ç‰¹æ–¯æ‹‰")) {
            return new Tesla(280, 40000, 6);
        } else {
            return null;
        }
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211108151010.png)

æˆ‘ä»¬å‘ç°è¿™ç§ç±»ä¼¼äºå·¥å‚çš„ä»£ç å¼€å‘æ¨¡å¼æœ‰ä¸€ä¸ªéå¸¸æ˜¾è‘—çš„ç‰¹ç‚¹ï¼Œé‚£å°±æ˜¯newåˆ›å»ºçš„è¿‡ç¨‹å’Œè°ƒç”¨æ˜¯åˆ†ç¦»ï¼Œå½“æˆ‘ä»¬éœ€è¦ä¸€å°æ–°è½¦çš„æ—¶å€™ï¼Œå¹¶ä¸éœ€è¦è‡ªå·±å»newæ¥åˆ›å»ºä¸€ä¸ªè½¦ï¼Œè€Œæ˜¯ç›´æ¥ä»CarFactoryå·¥å‚æä¾›çš„getCar()æ¥å£å–æè½¦å³å¯ã€‚ä½†æ˜¯è¿™åˆå’Œæ™®é€šçš„newæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿæˆ‘ä»¬è§‚å¯Ÿä¸Šé¢çš„ä»£ç å‘ç°æ­¤æ—¶WuLingå’ŒTeslaçš„æ„é€ å™¨éœ€è¦ä¼ é€’ä¸‰ä¸ªå‚æ•°ï¼Œè¿™æ˜¯å› ä¸ºè½¦çš„å¹¸å¥½æ€»æ˜¯åœ¨å‘ç”Ÿå˜åŒ–ï¼Œå¾ˆæ˜¾ç„¶æˆ‘ä»¬åœ¨åˆ›å»ºè½¦æ—¶éœ€è¦ç»™å‡ºè½¦çš„å‚æ•°ï¼Œä½†æ˜¯å®é™…ç”Ÿæ´»ä¸­æˆ‘ä»¬å¾€å¾€éœ€è¦ä¼ é€’ä¸Šä¸‡ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆæ­¤æ—¶è¿™ç§ç®€å•å·¥å‚æ¨¡å¼çš„ä¼˜ç‚¹å°±å¾ˆæ˜æ˜¾äº†ï¼Œåœ¨CarFactoryæˆ‘ä»¬åªéœ€è¦å¡«å†™ä¸€æ¬¡å‚æ•°å³å¯ï¼Œè€Œç›¸æ¯”äºå¤šæ¬¡newéƒ½éœ€è¦å†å¡«å†™ä»¥ä¾¿ä¸Šä¸‡ä¸ªå‚æ•°ï¼Œå¾ˆæ˜¾ç„¶è¿™ç§æ¨¡å¼æ›´åŠ äººæ€§åŒ–ï¼Œå¹¶ä¸”åæœŸä»£ç è¿›è¡Œå‚æ•°ä¿®æ”¹æ—¶ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦ä¿®æ”¹CarFactoryçš„æ„é€ å™¨çš„å‚æ•°å³å¯ã€‚

##### æ€è€ƒï¼šç®€å•å·¥å‚æ¨¡å¼æœ‰æ²¡æœ‰ä»€ä¹ˆç¼ºé™·ï¼Ÿ

æˆ‘ä»¬å‘ç°æˆ‘ä»¬æ˜¯åœ¨CarFactoryä¸­å¯¹ä¼ è¿›çš„è½¦å‹è¿›è¡Œåˆ¤æ–­ï¼Œç„¶åè°ƒç”¨å¯¹åº”çš„è½¦æ„é€ å™¨æ¥åˆ›å»ºè½¦å†è¿”è¿˜çš„ï¼Œé‚£ä¹ˆå½“éœ€è¦æ·»åŠ 1000+ç§ä¸åŒçš„è½¦å‹æ—¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ªç±»ä¸­å†™ä¸Šä¸‡ä¸ªåŒçº§çš„if-elseåˆ¤æ–­ï¼ï¼å¾ˆæ˜¾ç„¶è¿™æ˜¯å…¸å‹çš„`åˆ¤æ–­è†¨èƒ€`ç°è±¡ï¼Œæ—¢ä¸ä¼˜é›…ä¹Ÿä¸é«˜æ•ˆã€‚åŒæ—¶ç®€å•å·¥å‚æ¨¡å¼ä¹Ÿå¹¶ä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œå³å‡è®¾æ­¤æ—¶æˆ‘ä»¬éœ€è¦å†åŠ å…¥ä¸€ä¸ªæ–°çš„è½¦å‹å¤§ä¼—æ—¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¿®æ”¹åŸå…ˆå†™å¥½çš„CarFactoryç±»ï¼Œæ‰©å±•æ€§å¹¶ä¸å¥½ï¼Œå› æ­¤äº§ç”Ÿäº†ä¸‹é¢æ›´åŠ ä¼˜ç§€çš„å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚

æˆ‘ä»¬ç®€å•çš„ç»˜ç”»ä¸€ä¸‹ç®€å•å·¥å‚æ¨¡å¼å›¾ï¼š

![](https://langwenchong.gitee.io/figure-bed/20211021220826.png)

æ­¤æ—¶æˆ‘ä»¬æ˜¯é€šè¿‡è½¦å·¥åœºè¿›è¡Œåˆ¤æ–­ç„¶åè½¦å·¥åœºæ¥ç”Ÿäº§ä¸åŒçš„è½¦è¿”å›ç»™æˆ‘ä»¬æ¶ˆè´¹è€…ï¼Œå…¨è¿‡ç¨‹ä¸­æˆ‘ä»¬æ¶ˆè´¹è€…å¹¶ä¸éœ€è¦å…³å¿ƒè½¦çš„å…·ä½“æ„å»ºï¼Œä½†æ˜¯æ­¤æ—¶æˆ‘ä»¬è¦æ–°æ·»åŠ ä¸€ä¸ªè½¦å‹ï¼ŒåŠ¿å¿…è¦ä¿®æ”¹è½¦å·¥å‚çš„ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªè¿èƒŒå¼€é—­åŸåˆ™çš„ç¼ºé™·ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½ç›´æ¥å¯¹è½¦å·¥å‚è¿›è¡Œä¿®æ”¹ï¼Œè§£å†³ç­–ç•¥å°±æ˜¯å¯¹è½¦å·¥å‚åœ¨è¿›è¡Œä¸€å±‚å°è£…å¦‚ä¸‹å›¾ï¼š

![](https://langwenchong.gitee.io/figure-bed/20211021221224.png)

è¿™ä¸ªæ›´åŠ ç¬¦åˆç°å®ç”Ÿæ´»ä¸­ç”Ÿäº§å•†çš„æƒ…å½¢ï¼Œå³ä¸åŒçš„è½¦å‹éƒ½æœ‰è‡ªå·±çš„å·¥å‚ï¼Œæ¶ˆè´¹è€…æå–ä¸åŒçš„è½¦åªéœ€è¦å»ä¸åŒçš„è½¦å·¥å‚æè½¦å³å¯ï¼Œæ­¤æ—¶å½“æˆ‘ä»¬å†æ–°æ·»åŠ å¤§ä¼—å“ç‰Œè½¦æ—¶ï¼Œå¾ˆæ˜¾ç„¶æˆ‘ä»¬å¹¶æœªå¯¹å…¶ä»–çš„å·¥å‚ç±»è¿›è¡Œä¿®æ”¹ï¼Œæ»¡è¶³äº†å¼€é—­åŸåˆ™ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±ç»™å‡ºä»£ç ï¼š

{% tabs å·¥å‚æ¨¡å¼%}

<!-- tab Consumer.java -->

```java
public class Consumer {
    public static void main(String[] args) {

        //è·å–ä¸åŒç±»å‹çš„è½¦

        Car car1 = new WulingFactory().getCar();
        Car car2 = new TeslaFactory().getCar();
        car1.name();
        car2.name();
    }
}
```

<!-- endtab -->

<!-- tab Car.java -->

```java
//æŠ½è±¡æ¥å£ï¼Œä¸å†™å…·ä½“çš„å®ç°
public interface Car {
    void name();
}
```

<!-- endtab -->

<!-- tab CarFactory.java -->

```java
public interface CarFactory {
    Car getCar();
}
```

<!-- endtab -->

<!-- tab Wuling.java -->

```java
public class WuLing implements Car {
    @Override
    public void name() {
        System.out.println("äº”è±å®å…‰!");
    }

    private int weight;
    private int price;
    private int capacity;

    public WuLing(int weight, int price, int capacity) {
        this.weight = weight;
        this.price = price;
        this.capacity = capacity;
    }
}
```

<!-- endtab -->

<!-- tab Tesla.java -->

```java
public class Tesla implements Car {
    @Override
    public void name() {
        System.out.println("ç‰¹æ–¯æ‹‰!");
    }

    private int weight;
    private int price;
    private int capacity;

    public Tesla(int weight, int price, int capacity) {
        this.weight = weight;
        this.price = price;
        this.capacity = capacity;
    }
}
```

<!-- endtab -->

<!-- tab WulingFactory.java -->

```java
public class WulingFactory implements CarFactory {
    public Car getCar() {
        return new Wuling(200, 30000, 2);
    }
}
```

<!-- endtab -->

<!-- tab TeslaFactory.java -->

```java
public class TeslaFactory implements CarFactory {

    public Car getCar() {
        return new Tesla(280, 40000, 6);
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211108151048.png)

ä¸Šé¢çš„ä»£ç å°±æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä»£ç ï¼Œä»–å¯¹ç®€å•å·¥å‚æ¨¡å¼è¿›è¡Œäº†ä¼˜åŒ–ï¼Œç°åœ¨å°±ç¬¦åˆäº†å¼€é—­åŸåˆ™äº†ï¼Œä½†æ˜¯è¿™åˆä¼šå¯¼è‡´å¦ä¸€ä¸ªé—®é¢˜å³`ç±»è†¨èƒ€`ï¼Œæ­¤æ—¶æ¯ä¸€ä¸ªç›¸ä¼¼ç»“æ„ä¸åŒç±»å‹çš„äº§å“éƒ½éœ€è¦ä¸€ä¸ªè‡ªå·±çš„å·¥å‚ç±»ï¼Œä¼šå¯¼è‡´å‡ºç°è®¸å¤šåŠŸèƒ½ç±»ä¼¼çš„å·¥å‚ï¼Œä½†æ˜¯å½“ä»£ç é‡å¾ˆå¤§æ—¶ï¼Œè¿™ç§å·¥å‚æ–¹æ³•æ¨¡å¼æ•´ä½“æ¥çœ‹æ€§èƒ½è¿˜æ˜¯è¾ƒä¼˜çš„ã€‚

#### æŠ½è±¡å·¥å‚æ¨¡å¼

å‰é¢æˆ‘ä»¬æ‰€å­¦ä¹ çš„`ç®€å•å·¥å‚æ¨¡å¼`å’Œ`å·¥å‚æ–¹æ³•æ¨¡å¼`éƒ½æ˜¯é’ˆå¯¹åŒä¸€ä¸ªäº§å“çš„å¼€å‘æ¨¡å¼ï¼Œåªæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„å¯æ‰©å±•æ€§æ›´å¼ºã€‚é‚£ä¹ˆå‡è®¾æˆ‘ä»¬ç°åœ¨éœ€è¦ä¸€ç§å¯ä»¥ç”Ÿäº§è®¸å¤šç§äº§å“çš„å·¥å‚åˆè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿæ­¤æ—¶å°±äº§ç”Ÿäº†`æŠ½è±¡å·¥å‚æ¨¡å¼`çš„æ¦‚å¿µï¼Œå®é™…ä¸Šå¯ä»¥æŠŠä»–ç†è§£æˆä¸€ç§ç”Ÿäº§å·¥å‚çš„å·¥å‚ï¼Œå¦‚ä¸‹å›¾æ˜¯ä¸€ä¸ªåŸºäº`æŠ½è±¡å·¥å‚æ¨¡å¼`çš„ç”Ÿäº§æ‰‹æœºäº§å“å’Œè·¯ç”±å™¨äº§å“çš„å·¥å‚ç¤ºä¾‹ï¼š

![](https://langwenchong.gitee.io/figure-bed/20211022152309.png)

æ­¤æ—¶æˆ‘ä»¬å‘ç°æ¯ä¸€ä¸ªå·¥å‚ä¸å†åªèƒ½ç”Ÿäº§ä¸€ç§äº§å“äº†ï¼Œè€Œæ˜¯è®¸å¤šäº§å“äº†ã€‚å³åœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­å¯ä»¥æä¾›äº†ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–è€…ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œæ— éœ€æŒ‡å®šä»–ä»¬å…·ä½“çš„ç±»ã€‚åœ¨ç”¨ä»£ç å®ç°åº”ç”¨åœºæ™¯ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥ç†è§£ä¸€ä¸‹äº§å“æ—å’Œäº§å“ç­‰çº§çš„æ¦‚å¿µï¼š

![](https://langwenchong.gitee.io/figure-bed/20211022152741.png)

å³æ‰€æœ‰å±äºåŒä¸€å“ç‰Œçš„äº§å“æ˜¯åŒä¸€ä¸ªäº§å“æ—çš„ï¼Œä½†æ˜¯ä¸åŒç±»å‹çš„äº§å“æ˜¯å±äºä¸åŒçš„äº§å“ç­‰çº§ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†`æŠ½è±¡å·¥å‚æ¨¡å¼`ç†è§£ä¸ºæ­¤æ—¶çš„å…·ä½“å·¥å‚å¯ä»¥ç”Ÿäº§åŒä¸€ä¸ªäº§å“æ—äº†è€Œä¸å†æ˜¯å•ä¸€äº§å“äº†ã€‚è€ŒæŠ½è±¡å·¥å‚æ˜¯å®šä¹‰å…·ä½“å·¥å‚å¯ä»¥ç”Ÿäº§çš„äº§å“ç­‰çº§çš„å·¥å‚ã€‚å¦‚ä¸‹ä»£ç ï¼š

{% tabs æŠ½è±¡å·¥å‚æ¨¡å¼ %}

<!-- tab Consumer.java -->

```java
public class Consumer {
    public static void main(String[] args) {
        System.out.println("å°ç±³ç³»åˆ—äº§å“");
        //å°ç±³å·¥å‚
        XiaomiFactory xiaomiFactory = new XiaomiFactory();
        //è·å–ä¸€å°å°ç±³æ‰‹æœº
        IphoneProduct iphoneProduct1 = xiaomiFactory.iphoneProduct();
        iphoneProduct1.callUp();
        iphoneProduct1.sendSMS();

        //è·å–ä¸€å°å°ç±³è·¯ç”±å™¨
        IRouterProduct iRouterProduct1 = xiaomiFactory.routerProduct();
        iRouterProduct1.openWifi();
        iRouterProduct1.setting();

        System.out.println("åä¸ºç³»åˆ—äº§å“");
        //åä¸ºå·¥å‚
        HuaweiFactory huaweiFactory = new HuaweiFactory();
        //è·å–ä¸€å°åä¸ºæ‰‹æœº
        IphoneProduct iphoneProduct2 = huaweiFactory.iphoneProduct();
        iphoneProduct2.callUp();
        iphoneProduct2.sendSMS();

        //è·å–ä¸€å°åä¸ºè·¯ç”±å™¨
        IRouterProduct iRouterProduct2 = huaweiFactory.routerProduct();
        iRouterProduct2.openWifi();
        iRouterProduct2.setting();
    }
}
```

<!-- endtab -->

<!-- tab IphoneProduct.java -->

```java
//ç¬¬ä¸€ä¸ªäº§å“ç­‰çº§äº§å“--æ‰‹æœºçš„æŠ½è±¡åŠŸèƒ½æ¥å£
public interface IphoneProduct {
    void start();

    void shutDown();

    void callUp();

    void sendSMS();
}
```

<!-- endtab -->

<!-- tab IRouterProduct.java -->

```java
//ç¬¬äºŒä¸ªäº§å“ç­‰çº§äº§å“--è·¯ç”±å™¨çš„æŠ½è±¡åŠŸèƒ½æ¥å£
public interface IRouterProduct {
    void start();

    void shutDown();

    void openWifi();

    void setting();
}
```

<!-- endtab -->

<!-- tab IProductFactory.java -->

```java
//æŠ½è±¡äº§å“å·¥å‚å®šä¹‰å…·ä½“å·¥å‚å¯ä»¥ç”Ÿäº§çš„äº§å“ç­‰çº§
public interface IProductFactory {
    //ç”Ÿäº§æ‰‹æœº
    IphoneProduct iphoneProduct();

    //ç”Ÿäº§è·¯ç”±å™¨
    IRouterProduct routerProduct();
}
```

<!-- endtab -->

<!-- tab Xiaomiphone -->

```java
//å°ç±³æ‰‹æœºå…·ä½“å®ç°ç±»
public class Xiaomiphone implements IphoneProduct {

    @Override
    public void start() {
        System.out.println("å¼€å¯å°ç±³æ‰‹æœº");
    }

    @Override
    public void shutDown() {
        System.out.println("å…³é—­å°ç±³æ‰‹æœº");
    }

    @Override
    public void callUp() {
        System.out.println("å°ç±³æ‰‹æœºæ‰“ç”µè¯");
    }

    @Override
    public void sendSMS() {
        System.out.println("å°ç±³æ‰‹æœºå‘çŸ­ä¿¡");
    }
}

```

<!-- endtab -->

<!-- tab Xiaomirouter.java -->

```java
public class Xiaomirouter implements IRouterProduct {

    @Override
    public void start() {
        System.out.println("æ‰“å¼€å°ç±³è·¯ç”±å™¨");
    }

    @Override
    public void shutDown() {
        System.out.println("å…³é—­å°ç±³è·¯ç”±å™¨");
    }

    @Override
    public void openWifi() {
        System.out.println("æ‰“å¼€å°ç±³wifi");
    }

    @Override
    public void setting() {
        System.out.println("å…³é—­å°ç±³wifi");
    }
}
```

<!-- endtab -->

<!-- tab Huaweiphone.java -->

```java
public class Huaweiphone implements IphoneProduct {
    @Override
    public void start() {
        System.out.println("æ‰“å¼€åä¸ºæ‰‹æœº");
    }

    @Override
    public void shutDown() {
        System.out.println("å…³é—­åä¸ºæ‰‹æœº");
    }

    @Override
    public void callUp() {
        System.out.println("åä¸ºæ‰‹æœºæ‰“ç”µè¯");
    }

    @Override
    public void sendSMS() {
        System.out.println("åä¸ºæ‰‹æœºå‘çŸ­ä¿¡");
    }
}
```

<!-- endtab -->

<!-- tab Huaweirouter.java -->

```java
public class Huaweirouter implements IRouterProduct {
    @Override
    public void start() {
        System.out.println("æ‰“å¼€åä¸ºè·¯ç”±å™¨");
    }

    @Override
    public void shutDown() {
        System.out.println("å…³é—­åä¸ºè·¯ç”±å™¨");
    }

    @Override
    public void openWifi() {
        System.out.println("æ‰“å¼€åä¸ºwifi");
    }

    @Override
    public void setting() {
        System.out.println("å…³é—­åä¸ºwifi");
    }
}
```

<!-- endtab -->

<!-- tab XiaomiFactory.java -->

```java
public class XiaomiFactory implements IProductFactory {
    //ç”Ÿäº§å°ç±³äº§å“æ—ï¼Œå¹¶ä¸”æ»¡è¶³æŠ½è±¡å·¥å‚çš„å¼€å‘æ¨¡å¼ï¼Œå¯æ‰©å±•æ€§å¼º

    @Override
    public IphoneProduct iphoneProduct() {
        return new Xiaomiphone();
    }

    @Override
    public IRouterProduct routerProduct() {
        return new Xiaomirouter();
    }
}
```

<!-- endtab -->

<!-- tab HuaweiFactory.java -->

```java
public class HuaweiFactory implements IProductFactory {
    //ç”Ÿäº§åä¸ºäº§å“æ—ï¼Œå¹¶ä¸”æ»¡è¶³æŠ½è±¡å·¥å‚çš„å¼€å‘æ¨¡å¼ï¼Œå¯æ‰©å±•æ€§å¼º

    @Override
    public IphoneProduct iphoneProduct() {
        return new Huaweiphone();
    }

    @Override
    public IRouterProduct routerProduct() {
        return new Huaweirouter();
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211108151129.png)

æ­¤æ—¶ç»“æ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬ä¼šå‘ç°å®é™…ä¸ŠæŠ½è±¡å·¥å‚æ¨¡å¼ä¸è¿‡å°±æ˜¯å¯¹å·¥å‚è¿›è¡Œäº†åˆä¸€æ¬¡çš„æŠ½è±¡å°è£…ï¼Œæ‰€ä»¥æ­¤æ—¶æ”¯æŒäº†å·¥å‚å¯ä»¥ç”Ÿäº§äº§å“æ—äº†ã€‚

![](https://langwenchong.gitee.io/figure-bed/20211022160217.png)

##### æ€è€ƒï¼šç®€å•å·¥å‚æ¨¡å¼ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼çš„å¼‚åŒç‚¹ï¼Ÿ

å­¦ä¹ å®Œä¸Šé¢ä¸‰ç§å…³äºå·¥å‚æ¨¡å¼çš„ä»‹ç»ï¼Œæˆ‘ä»¬ä¼šå‘ç°å®é™…ä¸Šè¿™ä¸‰ç§å¼€å‘æ¨¡å¼éƒ½å’Œç°å®ç”Ÿæ´»ä¸­çš„å¼€å‘æ¨¡å¼éå¸¸ç±»ä¼¼ï¼Œç®€å•å·¥å‚æ¨¡å¼é¦–å…ˆæå‡ºäº†åˆ›å»ºå’Œåº”ç”¨åˆ†ç¦»ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼åœ¨åŸºç¡€ä¸Šä¼˜åŒ–äº†æ‰©å±•æ€§èƒ½ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼æ”¯æŒäº†äº§å“æ—çš„ç”Ÿäº§ã€‚ä½†æ˜¯è¿™ä¸‰è€…éƒ½ä¼šå¯¼è‡´ä¸€å®šç¨‹åº¦çš„`ç±»è†¨èƒ€`ç°è±¡ï¼Œæ‰€è°“æœ‰åˆ©å°±æœ‰å¼Šï¼Œä½†æ˜¯åœ¨é¢å¯¹å¤æ‚åœºæ™¯ä¸‹å·¥å‚æ¨¡å¼æ€»æ˜¯æœ€ä¼˜è§£ã€‚

#### å»ºé€ è€…æ¨¡å¼

å»ºé€ è€…æ¨¡å¼ä¹Ÿæ˜¯ä¸€ç§åˆ›é€ æ¨¡å¼ï¼Œä½†æ˜¯ä»–å’Œå·¥å‚æ¨¡å¼ä¸åŒï¼Œä»–æ˜¯å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥åœ¨ä¸çŸ¥é“å¯¹è±¡çš„å»ºé€ è¿‡ç¨‹å’Œç»†èŠ‚çš„æƒ…å†µä¸‹å°±å¯ä»¥å®Œæˆå¤æ‚å¯¹è±¡çš„åˆ›å»ºã€‚å®ƒä¸»è¦çš„ç‰¹ç‚¹å°±æ˜¯ç”¨æˆ·åªéœ€è¦ç»™å‡ºæŒ‡å®šå¤æ‚å¯¹è±¡çš„ç±»å‹å’Œå†…å®¹ï¼Œå»ºé€ è€…æ¨¡å¼è´Ÿè´£æŒ‰é¡ºåºåˆ›å»ºå¤æ‚å¯¹è±¡ï¼Œ æŠŠå…·ä½“çš„å†…éƒ¨çš„å»ºé€ è¿‡ç¨‹å’Œç»†èŠ‚éšè—èµ·æ¥ï¼ŒåŒæ—¶è¿˜æ”¯æŒæºå¸¦é»˜è®¤å€¼çš„å¤æ‚å¯¹è±¡çš„åˆ›å»ºã€‚

ä¸¾ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†è½´æ‰¿ï¼Œå‘åŠ¨æœºï¼Œè½®èƒç­‰äº§å“çš„å·¥å‚äº†ï¼Œä½†æ˜¯æœ€ç»ˆæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€è¾†è½¦ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦ç”±`å»ºé€ è€…`èº«ä»½æ¥ä¿è¯æˆ‘ä»¬å®Œæˆæœ€ç»ˆçš„ç»„ä»¶çš„æ‹¼è£…ä»¥åŠè¿›ä¸€æ­¥åŠ å·¥ï¼Œæœ€ç»ˆç”±ä»–æ¥å‘æˆ‘ä»¬äº¤ä»˜å®Œæˆçš„æ±½è½¦ã€‚

{% note info,

ä¹Ÿå°±æ˜¯è¯´é¢å¯¹ç®€å•å¯¹è±¡çš„åˆ›å»ºæ—¶ï¼Œæˆ‘ä»¬æ˜¯ç”¨ä¸åˆ°å»ºé€ è€…æ¨¡å¼çš„ã€‚åŒæ—¶è¦æ³¨æ„æ‰€æœ‰çš„è®¾è®¡æ¨¡å¼å¹¶ä¸æ˜¯å•ä¸€ä½¿ç”¨çš„ï¼Œè€Œæ˜¯äº’ç›¸ä¾èµ–çš„ï¼Œæ¯”å¦‚ä¸Šé¢çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¹Ÿç”¨åˆ°äº†å·¥å‚æ¨¡å¼ã€‚

%}

ç°åœ¨æˆ‘ä»¬ç”¨ä»£ç æ¥æ¼”ç¤ºä¸€ä¸‹å»ºé€ è€…æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼Œå‡è®¾ç°åœ¨æˆ‘ä»¬éœ€è¦å»ºç­‘ä¸€æ ‹å¤§å¦ï¼Œé‚£ä¹ˆé¦–å…ˆæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ªå»ºç­‘å…¬å¸æˆ–è€…å·¥ç¨‹æ‰¿åŒ…å•†ï¼ˆæŒ‡æŒ¥è€…ï¼‰ï¼Œç”±ä»–æ¥æŒ‡æŒ¥å·¥äººï¼ˆå…·ä½“çš„å»ºé€ è€…ï¼‰æ¥é€ æˆ¿å­ï¼ˆäº§å“ï¼‰ã€‚æœ€ç»ˆæˆ‘ä»¬å‘å»ºç­‘å…¬å¸ç´¢è¦å¤§å¦äº§å“ã€‚

![](https://langwenchong.gitee.io/figure-bed/20211022162801.png)

ä¸Šå›¾å°±æ˜¯ä¸€ä¸ªå»ºé€ è€…æ¨¡å¼çš„æ¼”ç¤ºå›¾ï¼Œå»ºç­‘å…¬å¸å°±æ˜¯Directorï¼Œå·¥äººå»ºé€ è€…å°±æ˜¯å…·ä½“çš„Builder,è€ŒæŠ½è±¡çš„Builderå°±æ˜¯è®¾è®¡å›¾çº¸ï¼Œå³æŒ‡æŒ¥è€…ç»™å‡ºæŠ½è±¡çš„å»ºé€ é¡ºåºï¼Œå»ºé€ è€…æ ¹æ®å»ºé€ é¡ºåºå…·ä½“å®ç°å»ºé€ æˆ–è€…äº§å“çš„ç»„è£…ï¼Œæœ€ç»ˆæŒ‡æŒ¥å®˜å°†å®Œæˆçš„äº§å“äº¤ä»˜ç»™æˆ‘ä»¬å®¢æˆ·ã€‚ä»£ç å¦‚ä¸‹ï¼š

{% tabs å»ºé€ è€…æ¨¡å¼ %}

<!-- tab Consumer.java -->

```java
//æˆ‘ä»¬å®¢æˆ·èº«ä»½
public class Consumer {
    public static void main(String[] args) {
        //åˆ›å»ºä¸€ä¸ªæŒ‡æŒ¥è€…
        Director director = new Director();
        //æˆ‘ä»¬åªéœ€è¦å‘½ä»¤æŒ‡æŒ¥è€…å¼€å§‹æ­å»ºæˆ¿å­å³å¯
        //å…·ä½“åé¢çš„æŒ‡æŒ¥è€…å¦‚ä½•æŒ‡æŒ¥å·¥äººæ­å»ºæˆ¿å­
        //ç”šè‡³æˆ¿å­çš„ç»„æˆç»“æ„æˆ‘ä»¬ä¸€æ¦‚ä¸çŸ¥ä¹Ÿæ— éœ€å…³å¿ƒ
        Product p = director.build(new Worker());
        System.out.println(p.toString());

    }
}
```

<!-- endtab -->

<!-- tab Product.java -->

```java
/å…·ä½“çš„æˆ¿å­äº§å“
public class Product {
    //æˆ¿å­æœ‰å››ä¸ªå€¼éœ€è¦å»ºé€ å¡«å……
    private String buildA;
    private String buildB;
    private String buildC;
    private String buildD;

    public String getBuildA() {
        return buildA;
    }

    public void setBuildA(String buildA) {
        this.buildA = buildA;
    }

    public String getBuildB() {
        return buildB;
    }

    public void setBuildB(String buildB) {
        this.buildB = buildB;
    }

    public String getBuildC() {
        return buildC;
    }

    public void setBuildC(String buildC) {
        this.buildC = buildC;
    }

    public String getBuildD() {
        return buildD;
    }

    public void setBuildD(String buildD) {
        this.buildD = buildD;
    }


    @Override
    public String toString() {
        return "Product{" +
                "buildA='" + buildA + '\'' +
                ", buildB='" + buildB + '\'' +
                ", buildC='" + buildC + '\'' +
                ", buildD='" + buildD + '\'' +
                '}';
    }


}
```

<!-- endtab -->

<!-- tab Director.java -->

```java
//å…·ä½“çš„æŒ‡æŒ¥è€…ï¼Œä»–æ¥åªä¼šå·¥äººæŒ‰é¡ºåºåˆ›å»ºäº§å“
//æ ¸å¿ƒ
public class Director {
    //æŒ‡æŒ¥è€…æœ‰ä¸€ä¸ªå¼€å§‹æŒ‡æŒ¥æ„å»ºäº§å“çš„å‡½æ•°
    //ä»–éœ€è¦æ¥æ”¶ä¼ è¿›æ¥ä¸€ä¸ªå·¥äººå³å…·ä½“çš„å®ç°Builderç±»å®ä¾‹
    public Product build(Builder builder){
        //ä»–åœ¨æŒ‡æŒ¥ ç€è¿™ä¸ªå·¥äººæŒ‰ç…§ä¸€å®šçš„é¡ºåºæ¥ç›–æˆ¿å­
        //è¿™é‡ŒæŒ‡æŒ¥å·¥äººæŒ‰ç…§A-B-C-Dé¡ºåºæ„å»ºæˆ¿å­
        //ä»–è´Ÿè´£å…·ä½“çš„æˆ¿å­ç»“æ„ç»„è£…
        builder.buildA();
        builder.buildB();
        builder.buildC();
        builder.buildD();
        //æœ€ç»ˆä»å·¥äººé‚£é‡Œæ‹¿åˆ°ç›–å¥½çš„æˆ¿å­
        //ç„¶åæŒ‡æŒ¥è€…æ¥å‘å®¢æˆ·äº¤ä»˜äº§å“
        return builder.getProduct();
    }

}
```

<!-- endtab -->

<!-- tab Builder.java -->

```java
//æŠ½è±¡çš„Builderï¼Œä¸æä¾›å…·ä½“çš„å»ºé€ å®ç°
//ä»…ä»…å®šä¹‰å»ºé€ çš„æ­¥éª¤
//æ³¨æ„è¿™é‡Œä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»éƒ½æ˜¯ç›¸åŒçš„ä½œç”¨
//è¡¨ç¤ºæŠ½è±¡çš„åŠŸèƒ½,è¿™é‡Œç”¨æŠ½è±¡ç±»è¡¨ç¤º
public abstract class Builder {
    abstract void buildA();//åœ°åŸº
    abstract void buildB();//é’¢ç­‹æ°´æ³¥
    abstract void buildC();//é“ºç”µçº¿
    abstract void buildD();//ç²‰åˆ·

    //å®Œå·¥äº¤ä»˜äº§å“
    abstract Product getProduct();
}
```

<!-- endtab -->

<!-- tab Worker.java -->

```java
/å…·ä½“çš„Builderå®ç°
public class Worker extends Builder {
    //å·¥äººä»…ä»…æ˜¯ä¼šåšè¿™äº›å·¥ä½œçš„ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰äººæŒ‡æŒ¥ä»–å¹¶ä¸ä¼šåš
    //å³ä»–ä¸çŸ¥é“ç›–æˆ¿å­çš„å…·ä½“æ­¥éª¤ï¼Œåªæ˜¯ä¼šæ­å»ºæˆ¿å­çš„ä¸€ç³»åˆ—æ“ä½œ

    private Product product;

    public Worker() {
        //ä¸€å®šè¦æ³¨æ„æ˜¯å·¥äººè¿™ä¸ªå…·ä½“Builderæ¥åˆ›å»ºäº§å“
        //æŠ½è±¡çš„Builderä»…ä»…å®šä¹‰æ–¹æ³•å’Œå®ç°é¡ºåº
        product = new Product();
    }

    @Override
    void buildA() {
        //å…ˆè¾¾åœ°åŸº
        product.setBuildA("åœ°åŸº");
    }

    @Override
    void buildB() {
        product.setBuildB("é’¢ç­‹å·¥ç¨‹");
    }

    @Override
    void buildC() {
        product.setBuildC("é“ºç”µçº¿");
    }

    @Override
    void buildD() {
        product.setBuildD("ç²‰åˆ·");
    }

    @Override
    Product getProduct() {
        return product;
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211108151256.png)

ä¸Šé¢å®ä¾‹æ—¶Builderå»ºé€ è€…æ¨¡å¼çš„å¸¸è§„ç”¨æ³•ï¼Œ å…¶ä¸­æŒ‡æŒ¥ç±»Directoråœ¨Builderæ¨¡å¼ä¸­æœ‰å¾ˆé‡è¦çš„ä½œç”¨ï¼Œå®ƒç”¨äºæŒ‡å¯¼å»ºé€ è€…Workerå¦‚ä½•æŒ‰ç…§é¡ºåºæ­£ç¡®çš„åˆ›é€ äº§å“ï¼Œå¹¶ä¸”åœ¨å®Œæˆäº§å“ç”Ÿæˆåå°†äº§å“è¿”è¿˜ç»™å®¢æˆ·ã€‚

ä½†æ˜¯æˆ‘ä»¬åœ¨ç°å®ç”Ÿæ´»ä¸­å¯èƒ½å®¢æˆ·å¹¶ä¸æ˜¯çœŸçš„ä¸å…³å¿ƒå…·ä½“çš„å®ç°æ“ä½œï¼Œè€Œæ˜¯å®¢æˆ·æœ¬èº«å°±æ˜¯æŒ‡æŒ¥è€…ï¼Œå› æ­¤æ­¤æ—¶æˆ‘ä»¬å¹¶ä¸éœ€è¦æ¥å®ç°ä¸€ä¸ªå¤æ‚çš„æŒ‡æŒ¥è€…ï¼Œåªéœ€è¦ä¸€ä¸ªå·¥äººå¯ä»¥æ ¹æ®æˆ‘ä»¬å®¢æˆ·çš„åªä¼šè¿›è¡Œäº§å“çš„åˆ›å»ºå³å¯ã€‚å› æ­¤é€šè¿‡é™æ€å†…éƒ¨ç±»æ–¹å¼å®ç°é›¶ä»¶æ— éœ€è£…é…æ„é€ ï¼Œè¿™ç§æ–¹å¼æ›´åŠ çµæ´»ç¬¦åˆå®šä¹‰ã€‚å½“å†…éƒ¨æœ‰å¤æ‚å¯¹è±¡çš„é»˜è®¤å®ç°ï¼Œä½¿ç”¨æ—¶å¯ä»¥æ ¹æ®ç”¨æˆ·éœ€æ±‚è‡ªå®šä¹‰æ›´æ”¹å†…å®¹ï¼Œå¹¶ä¸”æ— éœ€æ”¹å˜å…·ä½“çš„æ„é€ æ–¹å¼ï¼Œå°±å¯ä»¥ç”Ÿäº§å‡ºä¸åŒå¤æ‚äº§å“ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡éº¦å½“åŠ³ç‚¹é¤çš„åº”ç”¨åœºæ™¯æ¨¡æ‹Ÿä¸€ä¸‹è¿™ç§æ–¹å¼ï¼Œå³æœåŠ¡å‘˜ï¼ˆå…·ä½“çš„å»ºé€ è€…ï¼‰å¯ä»¥éšæ„æ­é…ä»»æ„å‡ ç§äº§å“ï¼ˆé›¶ä»¶ï¼‰ç»„æˆä¸€æ¬¾å¥—é¤ï¼ˆäº§å“ï¼‰ï¼Œç„¶åå‡ºå”®ç»™å®¢æˆ·ï¼Œä½†æ˜¯å®¢æˆ·å¯ä»¥æŒ‡æŒ¥æœåŠ¡å‘˜æ›´æ”¹é»˜è®¤çš„å¥—é¤ï¼Œè¿™ç§æ–¹å¼æŠŠæŒ‡æŒ¥è€…èº«ä»½äº¤ç»™äº†ç”¨æˆ·è‡ªå·±æ¥æ‰®æ¼”ï¼Œä½¿å¾—äº§å“çš„åˆ›å»ºæ›´åŠ ç®€å•çµæ´»ï¼š

{% tabs ç®€åŒ–ç‰ˆå»ºé€ è€…æ¨¡å¼ %}

<!-- tab Consumer.java -->

```java
public class Consumer {
    public static void main(String[] args) {
        //æˆ‘ä»¬è‡ªå·±æ‰®æ¼”æŒ‡æŒ¥è€…æ¥æ›´æ”¹å¥—é¤
        //é¦–å…ˆéœ€è¦åˆ›å»ºä¸€åæœåŠ¡å‘˜å³å»ºé€ è€…
        Worker worker = new Worker();
        //ä¿®æ”¹é»˜è®¤çš„å¥—é¤ï¼Œå°†æ±‰å ¡æ›´æ”¹ä¸ºä¸Šæ ¡é¸¡å—
        //ä¿®æ”¹é»˜è®¤çš„å¥—é¤ï¼Œå¯ç´¯æ›´æ”¹ä¸ºå’–å•¡
        //æœ€ç»ˆæˆ‘ä»¬ä»è¿™ä¸ªå½“å‰workerå®ä¾‹æ‰€æºå¸¦çš„å¥—é¤å®ä¾‹productè·å–ä¿®æ”¹çš„å¥—é¤
        //å³é™æ€å†…éƒ¨ç±»çš„ä½“ç°
        //åŒæ—¶è¿™é‡Œä¹Ÿä½“ç°äº†é“¾å¼å˜æˆçš„ç‰¹ç‚¹
        Product product = worker.buildA("ä¸Šæ ¡é¸¡å—").buildB("å’–å•¡").getProduct();
        //è¾“å‡ºå¥—é¤ä¿¡æ¯
        System.out.println(product.toString());
    }
}
```

<!-- endtab -->

<!-- tab Product.java -->

```java
//äº§å“å¥—é¤
public class Product {
    //é»˜è®¤çš„å¥—é¤äº§å“æ‰€æ‹¥æœ‰çš„çš„é£Ÿç‰©
    private String BuildA = "æ±‰å ¡";
    private String BuildB = "å¯ä¹";
    private String BuildC = "è–¯æ¡";
    private String BuildD = "ç”œç‚¹";

    public String getBuildA() {
        return BuildA;
    }

    public void setBuildA(String buildA) {
        BuildA = buildA;
    }

    public String getBuildB() {
        return BuildB;
    }

    public void setBuildB(String buildB) {
        BuildB = buildB;
    }

    public String getBuildC() {
        return BuildC;
    }

    public void setBuildC(String buildC) {
        BuildC = buildC;
    }

    public String getBuildD() {
        return BuildD;
    }

    public void setBuildD(String buildD) {
        BuildD = buildD;
    }
	
     @Override
    public String toString() {
        return "Product{" +
                "BuildA='" + BuildA + '\'' +
                ", BuildB='" + BuildB + '\'' +
                ", BuildC='" + BuildC + '\'' +
                ", BuildD='" + BuildD + '\'' +
                '}';
    }
}
```

<!-- endtab -->

<!-- tab Builder.java -->

```java
//æŠ½è±¡ç±»ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ¥å£ï¼Œæœ€ç»ˆåŠŸèƒ½ä¸€è‡´
public abstract class Builder {
    abstract Builder buildA(String msg);//æ±‰å ¡

    abstract Builder buildB(String msg);//å¯ä¹

    abstract Builder buildC(String msg);//è–¯æ¡

    abstract Builder buildD(String msg);//è›‹æŒ

    abstract Product getProduct();
}
```

<!-- endtab -->

<!-- tab Worker.java -->

```java
//å…·ä½“çš„å»ºé€ è€…ï¼ŒæœåŠ¡å‘˜
public class Worker extends Builder{
    //è¿™é‡Œä½“ç°äº†æ‡’æ±‰å¼å•ä¾‹åˆ›å»º
    private Product product;
    public Worker(){
        //æ³¨æ„äº§å“çš„åˆ›å»ºè¿˜æ˜¯ç”±åˆ›å»ºè€…æ¥å®Œæˆ
        product=new Product();
    }

    @Override
    Builder buildA(String msg) {
        //ä¿®æ”¹å¥—é¤çš„ç¬¬ä¸€ä¸ªé£Ÿå“
        product.setBuildA(msg);

        //æ³¨æ„è¿™é‡Œä¼˜ç‚¹ä¸å¥½ç†è§£
        //è¿”å›çš„æ˜¯å½“å‰çš„workerå®ä¾‹ï¼Œç”±äºè¿™ä¸ªworkerå†…éƒ¨åŒ…å«äº†ä¸€ä¸ªäº§å“
        //å› æ­¤é—´æ¥çš„è¿™ä¸ªworkeræ‰€æ›´æ”¹åˆ›å»ºçš„å¥—é¤ä¹Ÿè¿”è¿˜äº†
        //è¿™å°±æ˜¯é™æ€å†…éƒ¨ç±»çš„ä½“ç°
        return this;
    }

    @Override
    Builder buildB(String msg) {
        product.setBuildB(msg);
        return this;
    }

    @Override
    Builder buildC(String msg) {
        product.setBuildC(msg);
        return this;
    }

    @Override
    Builder buildD(String msg) {
        product.setBuildD(msg);
        return this;
    }

    @Override
    Product getProduct() {
        //è¿”è¿˜å½“å‰workeræ‰€æºå¸¦çš„äº§å“
        return product;
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211108151840.png)

é€šè¿‡ä¸Šé¢çš„ä¸¤ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºå»ºé€ è€…æ¨¡å¼å°†å¤æ‚å¯¹è±¡äº§å“çš„åˆ›å»ºæ­¥éª¤åˆ†è§£åœ¨äº†ä¸åŒçš„æ–¹æ³•ä¸­ï¼Œä½¿å¾—åˆ›å»ºè¿‡ç¨‹æ›´åŠ æ¸…æ™°ï¼ŒåŒæ—¶ä½¿å¾—å®¢æˆ·æ— éœ€åœ¨å…³å¿ƒå¤æ‚å¯¹è±¡çš„åˆ›å»ºï¼Œå…·ä½“çš„åˆ›å»ºäº¤ä»˜ç»™äº†Builderå’ŒDirectoræ¥å®Œæˆã€‚å¹¶ä¸”æˆ‘ä»¬æ ¹æ®ç¬¬äºŒä¸ªä¾‹å­å¯ä»¥çœ‹åˆ°å»ºé€ è€…æ¨¡å¼è¿˜å¯ä»¥æä¾›é»˜è®¤äº§å“å€¼å’Œä»–çš„é“¾å¼ä¿®æ”¹æ–¹æ³•ï¼Œä½¿å¾—äº§å“çš„è‡ªå®šä¹‰ç¨‹åº¦æ›´é«˜ã€‚ä½†æ˜¯æˆ‘ä»¬å‘ç°è¿™ç§æ¨¡å¼ä¹Ÿå­˜åœ¨ä¸€å®šçš„å¼Šç«¯ï¼Œå³åˆ›å»ºçš„äº§å“è¦æ±‚ä¸€èˆ¬å…·æœ‰è¾ƒå¤šçš„å…±åŒç‚¹ï¼Œå¦‚æœäº§å“ä¹‹é—´çš„å·®å¼‚è¾ƒå¤§æ—¶ï¼Œåˆ™ä¸é€‚ç”¨äºå»ºé€ è€…æ¨¡å¼ã€‚åŒæ—¶ç”±äºäº§å“å†…éƒ¨å˜åŒ–å¤æ‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´éœ€è¦å®šä¹‰å¾ˆå¤šå…·ä½“çš„å»ºé€ ç±»æ¥å®ç°è¿™ç§å˜åŒ–ï¼Œå¯¼è‡´ç³»ç»Ÿå˜çš„å¾ˆåºå¤§ï¼ˆåªæ˜¯è¿™é‡Œçš„ä¾‹å­ä¸­äº§å“è¾ƒä¸ºç®€å•ï¼Œå› æ­¤åªç”¨äº†ä¸€ä¸ªå»ºé€ ç±»å³å®Œæˆäº†å¤æ‚å¯¹è±¡çš„åˆ›å»ºï¼‰ã€‚

##### æ€è€ƒï¼šæŠ½è±¡å·¥å‚æ¨¡å¼å’Œå»ºé€ è€…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ

å…¶å®æˆ‘ä»¬å¾ˆå®¹æ˜“å°±å¯ä»¥æ„Ÿå—åˆ°åŒºåˆ«ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯è¿”è¿˜**ä¸€ç³»åˆ—**äº§å“ï¼Œè¿™äº›äº§å“å¯ä»¥ç›´æ¥é€šè¿‡newå³å¯åˆ›å»ºå®Œæˆï¼Œä½†æ˜¯åœ¨å»ºé€ è€…æ¨¡å¼ä¸­çš„äº§å“ä¸€èˆ¬éƒ½å¾ˆå¤æ‚ï¼Œå¹¶ä¸èƒ½ä¸€æ­¥newå³å¯å®Œæˆåˆ›å»ºï¼Œä»–éœ€è¦å¤šä¸ªé›¶ä»¶ç»„è£…å®Œæˆã€‚å› æ­¤å¦‚æœå°†æŠ½è±¡å·¥å‚æ¨¡å¼çœ‹æˆæ±½è½¦é…ä»¶ç”Ÿäº§å·¥å‚ï¼Œç”Ÿäº§ä¸€ä¸ªäº§å“æ—çš„äº§å“ï¼Œé‚£ä¹ˆå»ºé€ è€…æ¨¡å¼å°±æ˜¯ä¸€ä¸ªæ±½è½¦ç»„è£…å·¥å‚ï¼Œé€šè¿‡å¯¹éƒ¨ä»¶çš„ç»„è£…è¿”è¿˜**ä¸€ä¸ª**å®Œæ•´çš„è½¦è¾†ã€‚

{% note info,

ä¸€èˆ¬å»ºé€ è€…æ¨¡å¼æ˜¯ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼åˆ›å»ºçš„å„ç§äº§å“é›¶ä»¶è¿›è¡Œç»„è£…å®Œæˆä¸€ä¸ªå¤æ‚å¯¹è±¡çš„åˆ›å»ºï¼Œå› æ­¤ä¸¤ä¸ªæ¨¡å¼æ˜¯ç›¸äº’åˆä½œçš„ï¼

%}

#### åŸå‹æ¨¡å¼

æ‰€è°“åŸå‹æ¨¡å¼ï¼Œè¯´ç™½äº†å°±æ˜¯å®ä¾‹çš„èµ‹å€¼ï¼Œç±»ä¼¼äºå…‹éš†åŠ¨ç‰©ã€‚ä½†æ˜¯ä»–è¦æ±‚å…‹éš†ä»¥åä¸¤ä¸ªå®ä¾‹å†ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå³ä¸€ä¸ªå®ä¾‹çš„å˜åŒ–ä¸ä¼šå†å½±å“å¦ä¸€ä¸ªå®ä¾‹å³ä¸¤ä¸ªå®ä¾‹æŒ‡å‘ä¸åŒçš„å†…å­˜ç©ºé—´ï¼Œè¿™å…¶ä¸­æ¶‰åŠåˆ°äº†`æµ…æ‹·è´`å’Œ`æ·±æ‹·è´`çš„åŒºåˆ«ã€‚

##### æµ…æ‹·è´çš„å…‹éš†

{% tabs æµ…å…‹éš† %}

<!-- tab Video.java -->

```java
public class Video implements Cloneable {
    //1.å®ç°Cloneableæ¥å£
    private String name;
    private Date createTime;

    //2.é‡å†™è¿™ä¸ªæ–¹æ³•
    @Override
    protected Object clone() throws CloneNotSupportedException {
        return super.clone();
    }

    public Video() {

    }

    public Video(String name, Date date) {
        this.name = name;
        this.createTime = date;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Date getCreateTime() {
        return createTime;
    }

    public void setCreateTime(Date createTime) {
        this.createTime = createTime;
    }

    @Override
    public String toString() {
        return "Video{" +
                "name='" + name + '\'' +
                ", createTime=" + createTime +
                '}';
    }


}
```

<!-- endtab -->

<!-- tab Bilibili.java -->

```java
//å®¢æˆ·ç«¯ï¼šå®ç°å…‹éš†
public class Bilibili {
    public static void main(String[] args) throws CloneNotSupportedException {
        //åŸå‹å¯¹è±¡
        Date date = new Date();
        Video v1 = new Video("ç‹‚ç¥è¯´java", date);
        System.out.println("v1=>" + v1);
        System.out.println("v1=>hash" + v1.hashCode());

        //å…‹éš†v1
        Video v2 = (Video) v1.clone();
        //æ­¤æ—¶v2å’Œv1å†…å®¹ä¼šå®Œå…¨ä¸€è‡´ï¼Œå¹¶ä¸”å­˜å‚¨åˆ°äº†ä¸åŒçš„å†…å­˜ç©ºé—´
        //å‘ç°æ­¤æ—¶HashCodeç¡®å®ä¸åŒï¼Œè¯´æ˜å­˜å‚¨çš„å†…å­˜ç©ºé—´ä¸åŒ
        //æ­¤æ—¶æ›´æ”¹v2çš„åå­—ç¡®å®ä¸ä¼šæ”¹å˜v1çš„åå­—
        v2.setName("Clone:ç‹‚ç¥è¯´java");
        //ä½†æ˜¯æ­¤æ—¶æœ‰æµ…æ‹·è´çš„æƒ…å†µï¼Œå³v2å’Œv1çš„dateæŒ‡å‘åŒä¸€ä¸ªä½ç½®
        //é€ æˆv2ä¿®æ”¹æ—¶é—´åv1çš„æ—¶é—´ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿™å°±æ˜¯æµ…æ‹·è´
        date.setTime(22131231);
        v2.setCreateTime(date);
        //æ­¤æ—¶v1å’Œv2å¤§çš„æ—¶é—´ä¼šä¿æŒä¸€è‡´ï¼Œå³v1çš„æ—¶é—´è‡ªåŠ¨å‘ç”Ÿäº†å˜åŒ–å’Œv2ä¿æŒä¸€è‡´
        System.out.println(v2.getCreateTime().equals(v1.getCreateTime()));

    }

}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211108151956.png)

ä¸Šé¢ä¹‹æ‰€ä»¥å‡ºç°æµ…æ‹·è´ï¼Œæ˜¯å› ä¸ºæ­¤æ—¶è™½ç„¶ä¸¤ä¸ªå¯¹è±¡å„å ç”¨äº†ä¸åŒçš„å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”nameå˜é‡ä¹Ÿç¡®å®å ç”¨äº†ä¸åŒçš„ç©ºé—´ï¼Œä½†æ˜¯ç”±äºdateé»˜è®¤æ˜¯æ›´æ”¹å¼•ç”¨çš„ï¼Œå› æ­¤æ­¤æ—¶ä¸¤ä¸ªå®ä¾‹çš„dateè¿˜æ˜¯å…±äº«çš„ï¼Œå³æŒ‡å‘äº†ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œå¯¼è‡´äº†æµ…æ‹·è´çš„æƒ…å†µã€‚æˆ‘ä»¬ç”¨å›¾è¡¨ç¤ºä¸€ä¸‹æ­¤æ—¶çš„æƒ…å†µï¼š

![](https://langwenchong.gitee.io/figure-bed/20211022205047.png)

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹cloneæ–¹æ³•æ”¹æˆæ‰€æœ‰çš„å˜é‡ä¹Ÿå…¨éƒ¨éƒ½æ˜¯ä½¿ç”¨ä¸åŒçš„å†…å­˜ç©ºé—´å³æ·±æ‹·è´ã€‚

##### æ·±æ‹·è´çš„å…‹éš†

{% tabs  æ·±å…‹éš† %}

<!-- tab Video.java -->

```java
//1.å®ç°å…‹éš†æ¥å£
//2.é‡å†™ä¸€ä¸ªæ–¹æ³•å³å¯å®Œæˆå…‹éš†
public class Video implements Cloneable {
    //1.å®ç°Cloneableæ¥å£
    private String name;
    private Date createTime;

    //2.é‡å†™è¿™ä¸ªæ–¹æ³•
    @Override
    protected Object clone() throws CloneNotSupportedException {
//        return super.clone();
        //é‡å†™å…‹éš†æ–¹æ³•
        Object obj = super.clone();
        Video v = (Video) obj;
        //å°†å¯¹è±¡çš„å±æ€§ä¹Ÿå…¨éƒ¨é‡æ–°å…‹éš†ä¸€é
        v.createTime = (Date) this.createTime.clone();
        //è¿™é‡Œæœ€ç»ˆè¿”å›væˆ–è€…objéƒ½æ˜¯å¯ä»¥çš„
        return obj;
        //return v
    }

    public Video() {

    }

    public Video(String name, Date date) {
        this.name = name;
        this.createTime = date;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Date getCreateTime() {
        return createTime;
    }

    public void setCreateTime(Date createTime) {
        this.createTime = createTime;
    }

    @Override
    public String toString() {
        return "Video{" +
                "name='" + name + '\'' +
                ", createTime=" + createTime +
                '}';
    }


}
```

<!-- endtab -->

<!-- tab Bilibili.java -->

```java
//å®¢æˆ·ç«¯ï¼šå®ç°å…‹éš†
public class Bilibili {
    public static void main(String[] args) throws CloneNotSupportedException {
        //åŸå‹å¯¹è±¡
        Date date = new Date();
        Video v1 = new Video("ç‹‚ç¥è¯´java", date);
        System.out.println("v1=>" + v1);
        System.out.println("v1=>hash" + v1.hashCode());

        //å…‹éš†v1
        Video v2 = (Video) v1.clone();
        //æ­¤æ—¶v2å’Œv1å†…å®¹ä¼šå®Œå…¨ä¸€è‡´ï¼Œå¹¶ä¸”å­˜å‚¨åˆ°äº†ä¸åŒçš„å†…å­˜ç©ºé—´
        //å‘ç°æ­¤æ—¶HashCodeç¡®å®ä¸åŒï¼Œè¯´æ˜å­˜å‚¨çš„å†…å­˜ç©ºé—´ä¸åŒ
        //æ­¤æ—¶æ›´æ”¹v2çš„åå­—ç¡®å®ä¸ä¼šæ”¹å˜v1çš„åå­—
        v2.setName("Clone:ç‹‚ç¥è¯´java");
        //æ›´æ”¹ä¸ºäº†æ·±æ‹·è´ï¼Œå› æ­¤æ­¤æ—¶æ›´æ”¹v2çš„æ—¥æœŸï¼Œv1çš„æ—¥æœŸä¸ä¼šå‘ç”Ÿæ”¹å˜
        date.setTime(22131231);
        v2.setCreateTime(date);
        //å› æ­¤æ­¤æ—¶ä¸‹é¢ä¸ºfalse
        System.out.println(v2.getCreateTime().equals(v1.getCreateTime()));

    }

}
```

<!-- endtab -->

{%  endtabs %}

æ­¤æ—¶çš„æ·±æ‹·è´çš„æƒ…å†µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå› æ­¤æ­¤æ—¶ä¸¤ä¸ªå®ä¾‹æ‰€æœ‰æˆå‘˜å˜é‡å…¨éƒ¨éƒ½æŒ‡å‘äº†è‡ªå·±çš„å†…å­˜ç©ºé—´ï¼Œè§£å†³äº†æµ…æ‹·è´çš„é—®é¢˜ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨åºåˆ—åŒ–/ååºåˆ—åŒ–æ–¹æ³•å®ç°æ·±æ‹·è´ï¼Œä½†æ˜¯è¿œæ²¡æœ‰è¿™ç§ä¿®æ”¹cloneæ–¹æ³•ç®€å•ã€‚

![](https://langwenchong.gitee.io/figure-bed/20211022211206.png)

###### æ€è€ƒï¼šä¸ºä»€ä¹ˆé‡å†™çš„cloneæ–¹æ³•éƒ¨åˆ†è¿”è¿˜vå’Œobjéƒ½å¯ä»¥ï¼Ÿ

æˆ‘ä»¬è¦ç†è§£vå’Œobjçš„åŒºåˆ«ï¼Œæ­¤æ—¶ä»–ä»¬ä¸¤ä¸ªæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œåªä¸è¿‡æ˜¯væœ‰ä¸€ä¸ªVideoç±»å‹å¼ºè½¬çš„è¿‡ç¨‹ï¼Œå› æ­¤æœ€ç»ˆobjå’Œvçš„dateæ˜¯åŒä¸€ä¸ªå˜é‡ï¼Œå®ƒå®ç°äº†é‡æ–°å…‹éš†å³å®Œæˆäº†æ·±æ‹·è´ï¼Œå…·ä½“è¿”è¿˜objè¿˜æ˜¯véƒ½å¯ä»¥ï¼Œå› ä¸ºæœ€ç»ˆä»–ä»¬è¿”è¿˜éƒ½æ˜¯è¿™ä¸ªæ–°æ‹·è´çš„å¯¹è±¡å®ä¾‹çš„å†…å­˜ç©ºé—´ã€‚

{% note info,

åŸå‹æ¨¡å¼çš„åº”ç”¨åœºæ™¯å¾ˆå®¹æ˜“è”æƒ³åˆ°ï¼Œå³å·¥å‚æ¨¡å¼ä¸‹å·¥å‚ç”Ÿäº§äº§å“æˆ‘ä»¬å¯ä»¥ä¸å†ä½¿ç”¨newæ¥åˆ›å»ºï¼Œè€Œæ˜¯é€‰æ‹©cloneçš„æ–¹æ³•åˆ›å»ºæ¥æå‡æ•ˆç‡ã€‚

%}

**æ‚¨å¯ä»¥ç‚¹å‡»ä¸‹æ–¹é“¾æ¥è·å–ä¸Šé¢æ•™ç¨‹æ‰€ä½¿ç”¨çš„ä»£ç ,åŒæ—¶å¯ä»¥å‚è€ƒæœ¬ç¯‡åšå®¢å®Œæˆhomework01å®éªŒå·©å›ºå­¦ä¹ ğŸ˜Š**

{% link è®¾è®¡æ¨¡å¼ä»£ç ä»“åº“ , https://github.com/Langwenchong/DesignPattern %}



