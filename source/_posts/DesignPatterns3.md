---
title: Javeå­¦23ç§è®¾è®¡æ¨¡å¼(3)--è¡Œä¸ºå‹æ¨¡å¼
comments: false
top: false
date: 2021-11-09 11:37:51
tags: [è®¾è®¡æ¨¡å¼,java]
categories: 
	- [çŸ¥è¯†åˆ†äº«,å­¦ä¹ å¿ƒå¾—]
headimg: https://langwenchong.gitee.io/figure-bed/20211109214312.png
---

è®°å½•ç¿€ç¿€å¯¹23ç§è®¾è®¡æ¨¡å¼çš„æ€è€ƒä¸æ€»ç»“ğŸ“œï¼Œæœ¬ç« ä»‹ç»11ç§é‡è¦çš„è¡Œä¸ºå‹æ¨¡å¼ã€‚

<!-- more -->

### è¡Œä¸ºå‹æ¨¡å¼

{% note quote, ä¸Šä¸€ç« æˆ‘ä»¬å­¦ä¹ äº†7å¤§ç»“æ„å‹æ¨¡å¼ï¼Œæœ¬ç« æˆ‘ä»¬æ¥å­¦ä¹ 11ç§é‡è¦çš„è¡Œä¸ºå‹æ¨¡å¼ï¼Œè¡Œä¸ºå‹æ¨¡å¼æè¿°äº†å¤šä¸ªç±»æˆ–å¯¹è±¡ä¹‹é—´æ€ä¹ˆç›¸äº’åä½œå…±åŒå®Œæˆå•ä¸ªå¯¹è±¡éƒ½æ— æ³•å®Œæˆçš„ä»»åŠ¡ï¼Œæ¶‰åŠç®—æ³•ä¸å¯¹è±¡é—´èŒè´£çš„åˆ†é…ã€‚åŒæ ·ä»–ä¹Ÿåˆ†ä¸ºç±»è¡Œä¸ºæ¨¡å¼å’Œå¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼Œä¸ºäº†æ»¡è¶³`åˆæˆå¤ç”¨åŸåˆ™`ï¼Œæˆ‘ä»¬å°½é‡é€‰æ‹©ä½¿ç”¨èšåˆæ–¹å¼çš„å¯¹è±¡è¡Œä¸ºæ¨¡å¼ã€‚ %}

æˆ‘ä»¬ä¹Ÿæ˜¯é¦–å…ˆç»™å‡º11ç§è¡Œä¸ºå‹æ¨¡å¼çš„ç‰¹ç‚¹å’Œé‡è¦åŠŸèƒ½ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨å­¦ä¹ æ—¶èƒ½éšæ—¶å¸¦ç€æ€è€ƒå­¦ä¹ ï¼š

1. æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼šå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•ç»“æ„ï¼Œå°†ç®—æ³•çš„ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œä½¿å¾—**å­ç±»å¯ä»¥åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹é‡æ–°å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤**ã€‚
2. å‘½ä»¤æ¨¡å¼ï¼šå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œ**ä½¿å‘å‡ºè¯·æ±‚çš„è´£ä»»å’Œæ‰§è¡Œè¯·æ±‚çš„è´£ä»»åˆ†éš”å¼€**ã€‚
3. è¿­ä»£å™¨æ¨¡å¼ï¼šæä¾›ä¸€ä¸ªæ–¹æ³•æ¥é¡ºåºè®¿é—®èšåˆå¯¹è±¡ä¸­çš„ä¸€ç³»åˆ—æ•°æ®ï¼Œè€Œä¸**æš´éœ²èšåˆå¯¹è±¡çš„å†…éƒ¨è¡¨ç¤º**ã€‚
4. è§‚å¯Ÿè€…æ¨¡å¼ï¼šå¤šä¸ªå¯¹è±¡ä¹‹é—´å­˜åœ¨ä¸€å¯¹å¤šå…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶ï¼Œ**æŠŠè¿™ç§æ”¹å˜é€šçŸ¥ç»™å…¶ä»–å¤šä¸ªå¯¹è±¡**ï¼Œä»è€Œå½±å“å…¶ä»–å¯¹è±¡çš„è¡Œä¸ºã€‚
5. ä¸­ä»‹è€…æ¨¡å¼ï¼šå®šä¹‰ä¸€ä¸ªä¸­ä»‹è€…æ¥ç®€åŒ–åŸæœ‰å¯¹è±¡ä¹‹é—´çš„å¤æ‚äº¤äº’å…³ç³»ï¼Œé™ä½ç³»ç»Ÿä¸­å¯¹è±¡é—´çš„è€¦åˆåº¦ï¼Œ**ä½¿å¾—åŸæœ‰å¯¹è±¡ä¹‹é—´ä¸å¿…ç›¸äº’äº†è§£**ã€‚
6. å¤‡å¿˜å½•æ¨¡å¼ï¼šåœ¨**ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œè·å–å¹¶ä¿å­˜ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€**ï¼Œä»¥ä¾¿ä»¥åæ¢å¤ä»–ã€‚
7. è§£é‡Šå™¨æ¨¡å¼ï¼šæä¾›å¦‚ä½•**å®šä¹‰è¯­è¨€çš„æ–‡æ³•**ï¼Œä»¥åŠ**å¯¹è¯­è¨€å¥å­çš„è§£é‡Šæ–¹æ³•**ï¼Œå³è§£é‡Šå™¨ã€‚
8. çŠ¶æ€æ¨¡å¼ï¼šå…è®¸ä¸€ä¸ª**å¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸ºèƒ½åŠ›**ã€‚
9. ç­–ç•¥æ¨¡å¼ï¼šå®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶**å°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢**ï¼Œä¸”ç®—æ³•çš„æ”¹å˜ä¸ä¼šå½±å“ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚
10. èŒè´£é“¾æ¨¡å¼ï¼šæŠŠ**è¯·æ±‚ä»é“¾ä¸­çš„ä¸€ä¸ªå¯¹è±¡ä¼ åˆ°ä¸‹ä¸€ä¸ªå¯¹è±¡**ï¼Œç›´åˆ°è¯·æ±‚è¢«ç›¸åº”ä¸ºæ­¢ã€‚é€šè¿‡è¿™ç§æ–¹å¼å»é™¤å¯¹è±¡ä¹‹é—´çš„è€¦åˆã€‚
11. è®¿é—®è€…æ¨¡å¼ï¼šåœ¨ä¸æ”¹å˜é›†åˆå…ƒç´ çš„å‰æä¸‹ï¼Œä¸ºä¸€ä¸ªé›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ æä¾›å¤šç§è®¿é—®æ–¹å¼ï¼Œå³**æ¯ä¸€ä¸ªå…ƒç´ æœ‰å¤šä¸ªè®¿é—®è€…å¯¹è±¡è®¿é—®**ã€‚

{% note info,

ä¸Šé¢çš„11ç§è¡Œä¸ºå‹æ¨¡å¼ä¸­ï¼Œé™¤äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼å’Œè§£é‡Šå™¨æ¨¡å¼æ˜¯ç±»è¡Œä¸ºæ¨¡å¼ï¼Œå…¶ä»–çš„å…¨éƒ¨ä¸ºå¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚

%}

#### æ¨¡æ¿æ–¹æ³•æ¨¡å¼

æ¨¡æ¿æ–¹æ³•æ¨¡å¼æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­å®é™…ä¸Šæˆ‘ä»¬å°±å·²ç»ç»å¸¸ä½¿ç”¨è¿™ä¸ªæ¨¡å¼äº†ä»–é’ˆå¯¹çš„æ˜¯ä¸€äº›æ“ä½œæµç¨‹å¤§è‡´ç›¸åŒï¼Œåªæ˜¯å…·ä½“çš„æŸäº›ç‰¹å®šæ­¥éª¤çš„æ“ä½œç»†èŠ‚ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥å°†å¤§ä½“çš„æµç¨‹åœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰ï¼Œç„¶åç›¸åŒæ“ä½œçš„æµç¨‹ä¹Ÿå¯ä»¥åœ¨æŠ½è±¡ç±»ä¸­å®ç°ï¼Œä½†æ˜¯å¯¹äºé‚£äº›å…·ä½“æ“ä½œç»†èŠ‚ä¸å¤ªç›¸åŒçš„æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»å®ç°ï¼Œè¿™å°±æ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚æ¯”å¦‚ç‚’èœçš„æ­¥éª¤æ˜¯å›ºå®šçš„ï¼Œåˆ†ä¸ºå€’æ²¹ã€çƒ­æ²¹ã€å€’è”¬èœã€å€’è°ƒç†å“ã€çˆ†ç‚’ç­‰æ­¥éª¤ï¼Œç°åœ¨æˆ‘ä»¬å°†åˆ¶ä½œç‚’åŒ…èœå’Œç‚’èœå¿ƒä¸¤ä¸ªèœå“ï¼Œå¾ˆæ˜æ˜¾ä»–ä»¬çš„å¤§ä½“æ­¥éª¤æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯åœ¨å€’è”¬èœã€å€’è°ƒæ–™å“å’Œçˆ†ç‚’ä¸‰ä¸ªç¯èŠ‚ç•¥æœ‰ä¸åŒï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¥å®ç°ã€‚UMLå›¾å¦‚ä¸‹

![](https://langwenchong.gitee.io/figure-bed/20211109150720.png)

ä»£ç ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ç„¶åè¢«ä¸¤ä¸ªå…·ä½“å®ç°ç»§æ‰¿å³å¯ï¼Œå› æ­¤æ¨¡æ¿æ–¹æ³•æ˜¯ç±»è¡Œä¸ºå‹æ¨¡å¼ï¼Œä½†æ˜¯è¿™ç§ç±»è¡Œä¸ºå‹æ¨¡å¼æ˜¯æœ‰å¿…è¦çš„ï¼Œä»–ä¸èƒ½é€šè¿‡æ¥å£æ¥å®ç°ï¼Œè¿™æ˜¯å› ä¸ºå¾€å¾€å¤šä¸ªå…·ä½“å®ç°ç±»è¿˜ä¼šæœ‰ä¸€äº›ç›¸åŒçš„æˆå‘˜å±æ€§ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥åœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰å¥½è¿™äº›æˆå‘˜å˜é‡ï¼Œä½†æ˜¯æ¥å£å´æ— æ³•å®ç°ã€‚

{% tabs æ¨¡æ¿æ–¹æ³•æ¨¡å¼ %}

<!-- tab Client.java -->

```java
public class Client {
    public static void main(String[] args) {
        //ç‚’åŒ…èœ
        ConcreteClass_BaoCai baoCai = new ConcreteClass_BaoCai();
        //ç‚’èœ
        baoCai.cookProcess();
        System.out.println("===============");
        ConcreteClass_CaiXin caiXin = new ConcreteClass_CaiXin();
        caiXin.cookProcess();
    }
}
```

<!-- endtab -->

<!-- tab AbstractClass.java -->

```java
public abstract class AbstractClass {

    //æ¨¡æ¿æ–¹æ³•å®šä¹‰
    public final void cookProcess() {
        pourOil();
        heatOil();
        pourVagetable();
        fry();
    }

    //åŸºæœ¬æ–¹æ³•
    //ç¬¬ä¸€æ­¥
    public void pourOil() {
        System.out.println("å€’æ²¹");
    }

    //ç¬¬äºŒæ­¥çƒ­æ²¹æ˜¯ä¸€æ ·çš„ï¼Œç›´æ¥å®ç°
    public void heatOil() {
        System.out.println("çƒ­æ²¹");
    }

    //ç¬¬ä¸‰æ­¥è¦å€’çš„èœæ˜¯ä¸åŒçš„ï¼Œå› æ­¤è¿™é‡Œæ–¹æ³•ç»´æŒæŠ½è±¡
    public abstract void pourVagetable();

    //ç¬¬å››æ­¥å€’çš„è°ƒæ–™ä¸ä¸€æ ·ï¼Œä¹ŸæŠ½è±¡
    public abstract void pourSauce();

    //ç¬¬äº”æ­¥ç¿»ç‚’æ˜¯ä¸€æ ·çš„ï¼Œç›´æ¥åœ¨è¿™é‡Œå®ç°
    public void fry() {
        System.out.println("ç‚’å•Šç‚’å•Šç‚’å•Šåµåˆ°ç†Ÿå•Š");
    }
}
```

<!-- endtab -->

<!-- tab ConcreteClass_BaoCai.java -->

```java
//ç‚’åŒ…èœç±»
public class ConcreteClass_BaoCai extends AbstractClass {

    @Override
    public void pourVagetable() {
        System.out.println("ä¸‹é”…çš„æ˜¯åŒ…èœ");
    }

    @Override
    public void pourSauce() {
        System.out.println("ä¸‹é”…çš„æ˜¯è¾£æ¤’");
    }
}

```

<!-- endtab -->

<!-- tab ConcreteClass_CaiXin.java -->

```java
public class ConcreteClass_CaiXin extends AbstractClass {
    @Override
    public void pourVagetable() {
        System.out.println("ä¸‹é”…çš„æ˜¯èœå¿ƒ");
    }

    @Override
    public void pourSauce() {
        System.out.println("ä¸‹é”…çš„æ˜¯è’œè“‰");
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211109151333.png)

#### å‘½ä»¤æ¨¡å¼

å‘½ä»¤æ¨¡å¼åˆçœ‹æ„Ÿè§‰æ²¡æœ‰ä»€ä¹ˆæ˜æ˜¾çš„ä½œç”¨ï¼Œå¾ˆéš¾ç†è§£ä»–çš„åšæ³•ã€‚ä½†æ˜¯æˆ‘ä»¬åœ¨è”æƒ³C/Sçš„HTTPè¯·æ±‚æ¨¡å‹ä»¥åå°±å¾ˆå¥½ç†è§£äº†ï¼Œå‘½ä»¤æ¨¡å¼å®é™…ä¸Šå°±æ˜¯ç±»ä¼¼äºè¯·æ±‚ä¸æ‰§è¡Œåˆ†ç¦»çš„å¼€å‘æ¨¡å¼ï¼Œä»–çš„ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†ä½¿å¾—å‘½ä»¤å‘èµ·è€…å’Œå‘½ä»¤çš„æ‰§è¡Œè€…æƒ³åˆ†å¼€ï¼Œä¸¤è€…ç‹¬ç«‹å·¥ä½œï¼Œé€šè¿‡å‘½ä»¤è¿™ä¸ªè¯·æ±‚æ¥å»ºç«‹è”ç³»ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆå¥½çš„å»å®ç°å¤æ‚åº”ç”¨åœºæ™¯ä¸‹é«˜å¹¶å‘å¤æ‚è¯·æ±‚çš„æ¥æ”¶->æ‰§è¡Œ->å“åº”çš„è°ƒåº¦è¿‡ç¨‹äº†ã€‚æˆ‘ä»¬ä»¥é¤å…ä¸ºæ¡ˆä¾‹å­¦ä¹ ï¼Œåœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬å‡ºå»åƒé¥­éƒ½ä¼šé‡åˆ°å¦‚ä¸‹é¢çš„åœºæ™¯ï¼š

![](https://langwenchong.gitee.io/figure-bed/20211109151744.png)

æ­¤æ—¶ä¸€ä¸ªå®¢æˆ·å°±ç±»ä¼¼äºä»¥åº”ç”¨è¿›ç¨‹ï¼Œè®¸è®¸å¤šå¤šä¸ªå®¢æˆ·ï¼ˆåº”ç”¨è¿›ç¨‹ï¼‰å‘èµ·äº†å¤šä¸ªå¼‚æ­¥è¯·æ±‚ï¼ˆå¤šä¸ªè®¢å•ï¼‰ï¼Œæ­¤æ—¶éœ€è¦ç”±æœåŠ¡å‘˜è¿™ä¸ªè°ƒåº¦è¿™æ¥æ”¶æ‰€æœ‰è¯·æ±‚ç„¶ååˆç†çš„åˆ†é…ç»™å‘½ä»¤æ‰§è¡Œè€…ï¼ˆå¨å¸ˆï¼‰å®Œæˆè®¢å•ï¼ˆè¯·æ±‚ï¼‰ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å‘½ä»¤æ¨¡å¼ï¼Œè¿™é‡Œçš„è®¢å•å°±æ˜¯å‘½ä»¤ï¼Œæˆ‘ä»¬å‘ç°ä»å®¢æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œä»–å¹¶ä¸çŸ¥é“å…·ä½“çš„è®¢å•ï¼ˆå‘½ä»¤ï¼‰æ˜¯ç”±å“ªä½å¨å¸ˆï¼ˆå‘½ä»¤æ‰§è¡Œè€…ï¼‰å®Œæˆçš„å¹¶ä¸”ä»–ä¹Ÿå¹¶ä¸å…³å¿ƒï¼Œåªè¦èœå“ï¼ˆå“åº”ï¼‰åŠæ—¶æ­£ç¡®çš„è¿”å›å°±å¯ä»¥äº†ã€‚è€Œä»å¨å¸ˆçš„è§’åº¦æ¥çœ‹ï¼Œä»–ä¹Ÿå¹¶ä¸çŸ¥é“è®¢å•ï¼ˆå‘½ä»¤ï¼‰çš„è¯·æ±‚è€…ï¼ˆä¸Šå±‚åº”ç”¨ï¼‰æ˜¯è°å¹¶ä¸”ä»–ä¹Ÿå¹¶ä¸å…³å¿ƒï¼Œä»–åªéœ€è¦åŠæ—¶å®Œæˆè®¢å•ï¼ˆæ‰§è¡Œå‘½ä»¤ï¼‰å³å¯ã€‚è€Œè®¢å•ï¼ˆå‘½ä»¤ï¼‰çš„è°ƒåº¦åˆ†é…æœ‰è°ƒåº¦è€…ï¼ˆæœåŠ¡å‘˜ï¼‰å®Œæˆã€‚UMLå›¾å¦‚ä¸‹

![](https://langwenchong.gitee.io/figure-bed/20211109152248.png)

æˆ‘ä»¬æ³¨æ„ä¸Šé¢çš„UMLç±»å›¾ï¼ŒæœåŠ¡å‘˜è°ƒåº¦è€…å¯ä»¥é—´æ¥çš„è°ƒç”¨åˆ†é…å‘½ä»¤å’Œå‘½ä»¤æ‰§è¡Œè€…ï¼Œè¿™ä¸æ˜¾ç¤ºç”Ÿæ´»ä¸­çš„å¼€å‘åœºæ™¯éå¸¸ç±»ä¼¼ã€‚ä»£ç å¦‚ä¸‹

{% tabs å‘½ä»¤æ¨¡å¼ %}

<!-- tab Client.java -->

```java
public class Client {
    public static void main(String[] args) {
        Order order1 = new Order();
        order1.setDiningTable(1);
        order1.setFood("è¥¿çº¢æŸ¿é¸¡è›‹é¢", 1);
        order1.setFood("å°æ¯å¯ä¹", 2);

        Order order2 = new Order();
        order2.setDiningTable(2);
        order2.setFood("å°–å«è‚‰ä¸ç›–é¥­", 1);
        order2.setFood("å°æ¯é›ªç¢§", 1);


        //åˆ›å»ºå¨å¸ˆ
        SeniorChef receiver = new SeniorChef();
        //åˆ›å»ºå‘½ä»¤å¯¹è±¡
        OrderCommand cmd1 = new OrderCommand(receiver, order1);
        OrderCommand cmd2 = new OrderCommand(receiver, order2);
        //åˆ›å»ºæœåŠ¡å‘˜
        Waitor waitor = new Waitor();
        waitor.setCommand(cmd1);
        waitor.setCommand(cmd2);
        waitor.orderUp();
    }
}
```

<!-- endtab -->

<!-- tab Command.java -->

```java
public interface Command {
    void execute();
}
```

<!-- endtab -->

<!-- tab Order.java -->

```java
public class Order {
    //ä¸‹è®¢å•çš„é¤æ¡Œå·ç 
    private int diningTable;
    //æ‰€ä¸‹çš„èœå“åŠä»½æ•°
    private Map<String, Integer> foodDir = new HashMap<String, Integer>();

    public int getDiningTable() {
        return diningTable;
    }

    public void setDiningTable(int diningTable) {
        this.diningTable = diningTable;
    }

    public Map<String, Integer> getFoodDir() {
        return foodDir;
    }


    public void setFood(String name, int num) {
        foodDir.put(name, num);
    }
}
```

<!-- endtab -->

<!-- tab OrderCommand.java -->

```java
public class OrderCommand implements Command {

    //æŒæœ‰æ¥å—è€…å¯¹è±¡
    private SeniorChef receiver;
    private Order order;

    public OrderCommand(SeniorChef receiver, Order order) {
        this.receiver = receiver;
        this.order = order;
    }

    @Override
    public void execute() {
        System.out.println(order.getDiningTable() + "çš„è®¢å•ï¼š");
        Map<String, Integer> foodDir = order.getFoodDir();
        Set<String> keys = foodDir.keySet();
        for (String foodName : keys) {
            receiver.makeFood(foodName, foodDir.get(foodName));
        }
        System.out.println(order.getDiningTable() + "æ¡Œçš„é¥­èœå‡†å¤‡å®Œæ¯•");
    }
}
```

<!-- endtab -->

<!-- tab SeniorChef -->

```java\
public class SeniorChef {
    public void makeFood(String name, int num) {
        System.out.println(num + "ä»½" + name);
    }
}

```

<!-- endtab -->

<!-- tab Waitor.java -->

```java
public class Waitor {
    //æŒæœ‰å‘½ä»¤å¯¹è±¡,ä½†æ˜¯ä¸€ä¸ªæœåŠ¡å‘˜å¯ä»¥å‘å¸ƒå¤šä¸ªå‘½ä»¤ï¼Œå› æ­¤æŒæœ‰å¤šä¸ªå‘½ä»¤å¯¹è±¡
    private List<Command> commands = new ArrayList<Command>();

    public void setCommand(Command cmd) {
        //å°†cmdå¯¹è±¡å­˜å‚¨åˆ°Listä¸­
        commands.add(cmd);
    }

    //å‘èµ·å‘½ä»¤çš„åŠŸèƒ½ï¼Œå–Šè®¢å•æ¥äº†
    public void orderUp() {
        System.out.println("ç¾å¥³æœåŠ¡å‘˜è¯´ï¼šå¤§å¨ï¼Œæ–°è®¢å•æ¥äº†ï¼");
        //éå†Listé›†åˆ
        for (Command command : commands) {
            if (command != null) {
                command.execute();
            }
        }
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211109153018.png)

#### è¿­ä»£å™¨æ¨¡å¼

è¿­ä»£å™¨æ¨¡å¼æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿé€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨çš„éƒ½æ˜¯arrayæˆ–è€…listæ¥å­˜å‚¨ï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šé¢ä¸´ä¸€ç§é£é™©ï¼Œå³å…¨å±€æš´éœ²å’Œè¢«æ›´æ”¹ï¼Œè¿™ç§é£é™©éšæ‚£å¾ˆå¤§ï¼Œåœ¨è®¸å¤šå¯¹å®‰å…¨è¦æ±‚æé«˜çš„åº”ç”¨åœºæ™¯ä¸‹æ˜¯éœ€è¦é¿å…çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å°±ä¼šä½¿ç”¨åˆ°è¿­ä»£å™¨æ¨¡å¼ï¼Œä»–æ˜¯ä¸€ç§ç”±å¼€å‘è€…å®Œæˆç¡®ä¿å®‰å…¨çš„æƒ…å†µä¸‹ä¸»åŠ¨å‘å¤–æš´éœ²çš„ä¸€ä¸ªè¿­ä»£å™¨çš„æ¨¡å¼ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬ä¸»åŠ¨è§„é¿äº†å¯æ›´æ”¹çš„æƒé™ï¼Œä¿æŠ¤äº†æ•°æ®ã€‚å‡è®¾ç°åœ¨æˆ‘ä»¬è¦é‡‡ç”¨è¿­ä»£å™¨æ¨¡å¼æ¥é¡ºåºæ‰“å°ä¸€ä¸ªå­˜å‚¨å­¦ç”Ÿä¿¡æ¯å¯¹è±¡çš„å®¹å™¨ï¼Œé‚£ä¹ˆUMLå›¾å¦‚ä¸‹

![](https://langwenchong.gitee.io/figure-bed/20211109153545.png)

æˆ‘ä»¬ä¼šå‘ç°æˆ‘ä»¬æ˜¯å°†å­¦ç”Ÿå¯¹è±¡å­˜å‚¨åˆ°äº†ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼ŒåŒæ—¶è¿™ä¸ªåˆ—è¡¨åˆæ˜¯**Aggregateå®ä¾‹çš„ä¸€ä¸ªéšç§æˆå‘˜å˜é‡ï¼Œæ˜¯ä¸å…è®¸å¤–ç•Œè®¿é—®è·å¾—ç”šè‡³ä¿®æ”¹çš„**ï¼Œé‚£ä¹ˆå¾ˆæ˜¾ç„¶æ­¤æ—¶è¿™äº›æ•°æ®æ—¶è¢«å®‰å…¨ä¿æŠ¤çš„ï¼Œé‚£ä¹ˆç°åœ¨å¦‚æœæˆ‘ä»¬éœ€è¦é¡ºåºæ‰“å°ä»–ä»¬ï¼Œå¹¶ä¸èƒ½ç›´æ¥é€šè¿‡forå¾ªç¯è®¿é—®åˆ—è¡¨ï¼Œè€Œæ˜¯éœ€è¦ä½¿ç”¨å¼€å‘è€…å®šä¹‰çš„ä¸€ä¸ªè¿­ä»£å™¨æ¥å®Œæˆï¼ŒåŒæ—¶è¿™ä¸ªè¿­ä»£å™¨è¿”è¿˜çš„å¹¶ä¸æ˜¯å¯¹è±¡å¼•ç”¨ï¼Œè€Œæ˜¯ä¸€ä¸ªå¤åˆ¶å¯¹è±¡ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨ä½¿ç”¨è¿™ä¸ªå¼€å‘è€…æä¾›ç»™æˆ‘ä»¬çš„è¿­ä»£å™¨åä¹Ÿæ˜¯æ— æƒè®¿é—®æºæ•°æ®çš„ï¼Œå¯è§å®‰å…¨æ€§æé«˜ã€‚ä»£ç å¦‚ä¸‹

{% tabs è¿­ä»£å™¨æ¨¡å¼ %}

<!-- tab Client.java -->

```java
public class Client {
    public static void main(String[] args) {
        //åˆ›å»ºèšåˆå¯¹è±¡
        StudentAggregateImpl studentAggregate = new StudentAggregateImpl();
        //æ·»åŠ å…ƒç´ 
        studentAggregate.addStudent(new Student("å¼ ä¸‰", "001"));
        studentAggregate.addStudent(new Student("æå››", "002"));
        studentAggregate.addStudent(new Student("ç‹äº”", "003"));
        studentAggregate.addStudent(new Student("èµµå…­", "004"));
        //1.è·å–è¿­ä»£å™¨å¯¹è±¡
        StudentIterator studentIterator = studentAggregate.getStudentIterator();
        //2.éå†
        while (studentIterator.hasNext()) {
            System.out.println(studentIterator.next().toString());
        }
    }
}
```

<!-- endtab -->

<!-- tab Studentjava -->

```java
public class Student {
    private String name;
    private String number;

    public Student() {
    }

    public Student(String name, String number) {
        this.name = name;
        this.number = number;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getNumber() {
        return number;
    }

    @Override
    public String toString() {
        return "Student{" +
                "name='" + name + '\'' +
                ", number='" + number + '\'' +
                '}';
    }

    public void setNumber(String number) {
        this.number = number;
    }
}
```

<!-- endtab -->

<!-- tab StudentAggeragate.java -->

```java
public interface StudentAggregate {
    //æ·»åŠ å­¦ç”ŸåŠŸèƒ½
    void addStudent(Student student);

    //åˆ é™¤å­¦ç”ŸåŠŸèƒ½
    void removeStudent(Student student);

    //è·å–è¿­ä»£å™¨å¯¹è±¡åŠŸèƒ½
    StudentIterator getStudentIterator();
}
```

<!-- endtab -->

<!-- tab StudentAggregateImpl.java -->

```java
public class StudentAggregateImpl implements StudentAggregate {

    private List<Student> studentList = new ArrayList<Student>();

    @Override
    public void addStudent(Student student) {
        studentList.add(student);
    }

    @Override
    public void removeStudent(Student student) {
        studentList.remove(student);
    }

    @Override
    public StudentIterator getStudentIterator() {
        return new StudentIteratorImpl(studentList);
    }
}
```

<!-- endtab -->

<!-- tab StudentIterator.java -->

```java
//æŠ½è±¡è¿­ä»£å™¨è§’è‰²æ¥å£
public interface StudentIterator {
    //åˆ¤æ–­æ˜¯å¤Ÿè¿˜æœ‰å…ƒç´ 
    boolean hasNext();
    //è·å–ä¸‹ä¸€ä¸ªå…ƒç´ 

    Student next();
}
```

<!-- endtab -->

<!-- tab StudentIteratorImpl.java -->

```java
//å…·ä½“çš„è¿­ä»£å™¨è§’è‰²ç±»
public class StudentIteratorImpl implements StudentIterator {


    private List<Student> studentList;
    //ç”¨æ¥è®°å½•éå†æ—¶çš„ä½ç½®
    private int position;

    public StudentIteratorImpl(List<Student> studentList) {
        this.studentList = studentList;
    }

    @Override
    public boolean hasNext() {
        return position < studentList.size();
    }

    @Override
    public Student next() {
        Student student = studentList.get(position);
        position++;
        return student;
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211109154231.png)

#### è§‚å¯Ÿè€…æ¨¡å¼

è§‚å¯Ÿè€…æ¨¡å¼è§£å†³çš„å°±æ˜¯ä¸€ä¸ªä¸€å¯¹å¤šé€šçŸ¥å˜åŒ–çš„åº”ç”¨åœºæ™¯ï¼Œä¼˜ç‚¹ç±»ä¼¼äºå¹¿æ’­çš„å½¢å¼ã€‚ç”±äºé€šçŸ¥å‘èµ·è€…éœ€è¦å‘å…¨éƒ¨è§‚å¯Ÿè€…å‘èµ·å˜æ›´é€šçŸ¥ï¼Œæ‰€ä»¥è·Ÿå®¹æ˜“æƒ³åˆ°ä»–è‚¯å®šæ˜¯æœ‰ä¸€ä¸ªåˆ—è¡¨èšåˆå­˜å‚¨äº†å…¶ä»–è§‚å¯Ÿè€…å®ä¾‹ï¼ŒUMLå›¾å¦‚ä¸‹

![](https://langwenchong.gitee.io/figure-bed/20211109154523.png)

{% tabs è§‚å¯Ÿè€…æ¨¡å¼ %}

<!-- tab Client.java-->

```java
public class Client {
    public static void main(String[] args) {
        //1.åˆ›å»ºå…¬ä¼—å·å¯¹è±¡
        SubscriptionSubject subscriptionSubject = new SubscriptionSubject();
        //2.è®¢é˜…å…¬ä¼—å·
        subscriptionSubject.attach(new WeixinUser("å­™æ‚Ÿç©º"));
        subscriptionSubject.attach(new WeixinUser("çŒªæ‚Ÿèƒ½"));
        subscriptionSubject.attach(new WeixinUser("æ²™æ‚Ÿå‡€"));
        //3.å…¬ä¼—å·æ›´æ–°å‘é€æ¨é€æ¶ˆæ¯
        subscriptionSubject.notify("ä¼ è‡³é»‘é©¬çš„ä¸“æ æ›´æ–°äº†");
    }
}
```

<!-- endtab -->

<!-- tab Observer.java -->

```java
//æŠ½è±¡è§‚å¯Ÿè€…ç±»
public interface Observer {
    void update(String msg);
}
```

<!-- endtab -->

<!-- tab Subject.java -->

```java
//æŠ½è±¡ä¸»é¢˜è§’è‰²ç±»
public interface Subject {
    //æ·»åŠ è®¢é˜…è€…æˆ–è€…è§‚å¯Ÿè€…å¯¹è±¡
    void attach(Observer observer);

    //åˆ é™¤è®¢é˜…è€…
    void detach(Observer observer);

    //é€šçŸ¥è§‚å¯Ÿè€…æ›´æ–°æ¶ˆæ¯
    void notify(String msg);
}
```

<!-- endtab -->

<!-- tab SubscriptionSubject.java -->

```java
public class SubscriptionSubject implements Subject {


    //å®šä¹‰ä¸€ä¸ªé›†åˆç”¨æ¥å­˜å‚¨å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡
    private List<Observer> weixinUserList = new ArrayList<Observer>();

    @Override
    public void attach(Observer observer) {
        weixinUserList.add(observer);
    }

    @Override
    public void detach(Observer observer) {
        weixinUserList.remove(observer);
    }

    @Override
    public void notify(String msg) {
        for (Observer observer : weixinUserList) {
            observer.update(msg);
        }
    }
}
```

<!-- endtab -->

<!-- tab WeixinUser.java -->

```java
public class WeixinUser implements Observer {

    private String name;

    public WeixinUser(String name) {
        this.name = name;
    }

    @Override
    public void update(String msg) {
        System.out.println(name + "-" + msg);
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211109154804.png)

å®é™…ä¸Šä¸Šé¢å’Œè¿™ä¸ªæ¡ˆä¾‹è¿˜æœ‰ç‚¹ç®€å•ï¼Œå› ä¸ºä»–æ˜¯å•æ–¹å‘çš„é€šçŸ¥ï¼Œå³å¤šä¸ªè®¢é˜…è§‚å¯Ÿè€…è®¢é˜…ä¸“æ ï¼Œå½“ä¸“æ å˜åŒ–æ—¶å…¶ä»–è®¢é˜…è§‚å¯Ÿè€…è·å–åˆ°é€šçŸ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªå•æ–¹å‘çš„æ¡ˆä¾‹ã€‚ä½†æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ä¸€èˆ¬æ˜¯åŒå‘ç”šè‡³å¤šå‘çš„æ¡ˆä¾‹ï¼Œæ¯”å¦‚ç°åœ¨æœ‰ä¸€ä¸ªæˆ˜åœ°å°åˆ†é˜Ÿï¼Œæ‰€æœ‰çš„é˜Ÿå‘˜éƒ½åœ¨åŒä¸€ä¸ªé¢‘é“ï¼Œä»»ä½•ä¸€ä¸ªé˜Ÿå‘˜å—åˆ°æ”»å‡»éƒ½å¯ä»¥å‘ŠçŸ¥å…¶ä»–çš„åŒç»„é˜Ÿå‹åœ°æ–¹æˆ˜æ–—ä¿¡æ¯ï¼Œè¿™ç§å¤šå‘çš„åº”ç”¨åœºæ™¯ä¸‹ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ä¼˜ç‚¹æ›´åŠ æ˜æ˜¾ï¼Œå¦‚æœæœ‰å…´è¶£ä½ å¯ä»¥å°è¯•å®ç°ã€‚

#### ä¸­ä»‹æ¨¡å¼

ä¸­ä»‹æ¨¡å¼å¾ˆå®¹æ˜“ç†è§£ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ç»å¸¸ä¼šè§‚å¯Ÿåˆ°è¿™ä¸ªæ¨¡å¼çš„åº”ç”¨ï¼Œä»–å°±æ˜¯ä¸ºäº†è§£å†³å¤šä¸ªå¯¹è±¡ä¹‹é—´å…³ç³»è¿‡äºå¤æ‚çš„åœºæ™¯ï¼Œç”±ä¸­ä»‹è€…å¼•å…¥ç®¡ç†æ‰€æœ‰çš„é€šä¿¡ç®€åŒ–å…³ç³»ç½‘æ˜¯æœ€ä¼˜è®¾è®¡æ¨¡å¼ï¼Œæˆ‘ä»¬ç”¨ä¸¤ä¸ªå›¾å¯ä»¥æ¸…æ™°æ„ŸçŸ¥åˆ°ä»–çš„å¼ºå¤§ä¹‹å¤„ã€‚

{% gallery , , one %}
![å¼•å…¥ä¸­ä»‹æ¨¡å¼å‰](https://langwenchong.gitee.io/figure-bed/20211109155951.png)

![å¼•å…¥ä¸­ä»‹æ¨¡å¼å](https://langwenchong.gitee.io/figure-bed/20211109160018.png)

{% endgallery %}

å®é™…ä¸Šæˆ‘ä»¬åœ¨å­¦ä¹ è®¡ç½‘æ—¶ï¼Œå°±æ›¾ç»å­¦ä¹ è¿‡ï¼Œå¯¹äºä¸­ä»‹æ¨¡å¼å°±æ˜¯æ‰€è°“çš„æ˜Ÿå½¢ç»“æ„ï¼Œä»–æå¤§çš„ç®€åŒ–äº†é€šä¿¡çš„å¤æ‚ç¨‹åº¦ï¼Œä½†æ˜¯è¿™ä¹Ÿå¯¹ä¸­ä»‹è€…è¿™ä¸ªä¸­æ¢ç»„ä»¶æå‡ºäº†é«˜è´Ÿè·æƒ…å†µä¸‹å‡†ç¡®å®Œç¾è¿è¡Œçš„æé«˜è¦æ±‚ã€‚å› ä¸ºä¸€æ—¦ä¸­ä»‹è€…æŸåï¼Œæ•´ä¸ªè”ç»œç½‘å°†ç˜«ç—ªã€‚è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ä»¥ä¸­ä»‹ï¼Œæˆ¿ä¸œï¼Œç§Ÿæˆ¿è€…è¿™ä¸ªå†å¸¸è§ä¸è¿‡çš„æ¡ˆä¾‹æ¥æ¨¡æ‹Ÿå®ç°ä»¥ä¸‹ä¸­ä»‹è€…æ¨¡å¼ï¼ŒUMLå›¾å¦‚ä¸‹

![](https://langwenchong.gitee.io/figure-bed/20211109160324.png)

å¾ˆæ˜æ˜¾ä¸­ä»‹è€…æ˜¯ç”¨æ¥åè°ƒåŒæ–¹çš„ï¼Œå› æ­¤ä»–MediatorStructureå…·ä½“ä¸­ä»‹å®ç°ç±»èšåˆäº†Tenantç§Ÿæˆ¿è€…ç±»å’ŒHouseOwneræˆ¿ä¸œç±»ã€‚ä»£ç å¦‚ä¸‹

{% tabs ä¸­ä»‹æ¨¡å¼ %}

<!-- tab Client.java -->

```java
public class Client {
    public static void main(String[] args) {
        //åˆ›å»ºä¸­ä»‹è€…å¯¹è±¡
        MediatorStructure mediatorStructure = new MediatorStructure();

        Tenant tenant = new Tenant("æå››", mediatorStructure);
        HouseOwner houseOwner = new HouseOwner("å¼ ä¸‰", mediatorStructure);
        mediatorStructure.setTenant(tenant);
        mediatorStructure.setHouseOwner(houseOwner);
        tenant.contact("æˆ‘æƒ³ç§Ÿæˆ¿å­");
        houseOwner.contact("æˆ‘å¯ä»¥ç§Ÿç»™ä½ ï¼Œ5000ä¸€æœˆ");
    }
}

```

<!-- endtab -->

<!-- tab Person.java -->

```java
//æŠ½è±¡åŒäº‹ç±»
public abstract class Person {
    protected  String name;
    protected  Mediator mediator;

    public Person(String name, Mediator mediator) {
        this.name = name;
        this.mediator = mediator;
    }
}
```

<!-- endtab -->

<!-- tab Tenant.java -->

```java
//å…·ä½“åŒäº‹è§’è‰²ç±»
public class Tenant extends Person {
    public Tenant(String name, Mediator mediator) {
        super(name, mediator);
    }

    //å’Œä¸­ä»‹è€…è”ç³»æ–¹æ³•
    public void contact(String msg) {
        mediator.contact(msg, this);
    }

    //è·å–ä¿¡æ¯çš„æ–¹æ³•
    public void getMessage(String msg) {
        System.out.println("ç§Ÿæˆ¿è€…" + name + "è·å–åˆ°çš„ä¿¡æ¯æ˜¯ï¼š" + msg);
    }

}
```

<!-- endtab -->

<!-- tab HouseOwner.java -->

```java
//å…·ä½“çš„åŒæ—¶è§’è‰²ç±»
public class HouseOwner extends Person {
    public HouseOwner(String name, Mediator mediator) {
        super(name, mediator);
    }

    //å’Œä¸­ä»‹è€…è”ç³»æ–¹æ³•
    public void contact(String msg) {
        mediator.contact(msg, this);
    }

    //è·å–ä¿¡æ¯çš„æ–¹æ³•
    public void getMessage(String msg) {
        System.out.println("æˆ¿ä¸»" + name + "è·å–åˆ°çš„ä¿¡æ¯æ˜¯ï¼š" + msg);
    }

}
```

<!-- endtab -->

<!-- tab Mediator.java -->

```java
//æŠ½è±¡ä¸­ä»‹è€…ç±»
public abstract class Mediator {
    public abstract void contact(String msg,Person person);

}
```

<!-- endtab -->

<!-- tab MediatorStructure.java -->

```java
//å…·ä½“çš„ä¸­ä»‹è€…è§’è‰²ç±»
public class MediatorStructure extends Mediator {
    //èšåˆæˆ¿ä¸»å’Œå…·ä½“çš„ç§Ÿæˆ¿è€…
    Tenant tenant;
    HouseOwner houseOwner;

    public Tenant getTenant() {
        return tenant;
    }

    public void setTenant(Tenant tenant) {
        this.tenant = tenant;
    }

    public HouseOwner getHouseOwner() {
        return houseOwner;
    }

    public void setHouseOwner(HouseOwner houseOwner) {
        this.houseOwner = houseOwner;
    }

    @Override
    public void contact(String msg, Person person) {
        if (person == houseOwner) {
            tenant.getMessage(msg);
        } else {
            houseOwner.getMessage(msg);
        }
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211109160844.png)

#### å¤‡å¿˜å½•æ¨¡å¼

å¤‡å¿˜å½•æ¨¡å¼å®Œæˆçš„å°±æ˜¯çŠ¶æ€çš„æ¢å¤ç±»ä¼¼äºå›æ»šï¼Œä»–åœ¨æ¸¸æˆå¼€å‘ä¸­éå¸¸å¸¸è§ï¼Œæ¯”å¦‚å‰¯æœ¬æŒ‘æˆ˜å¤±è´¥åå›åˆ°æŒ‘æˆ˜å‰çš„çŠ¶æ€å†æ¬¡æŒ‘æˆ˜ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å¤‡å¿˜å½•æ¨¡å¼æ¥å®Œæˆäº†ã€‚å¤‡å¿˜å½•æ¨¡å¼åˆ†ä¸ºç™½ç®±å¤‡å¿˜å½•å’Œé»‘ç®±å¤‡å¿˜å½•æ¨¡å¼ï¼Œä¸¤è€…ä¸­åè€…å®‰å…¨æ€§æ›´å¥½ï¼Œä½†æ˜¯æ— è®ºæ˜¯å“ªä¸€ç§ï¼Œä»–ä»¬çš„å®ç°éƒ½æ˜¯é€šè¿‡å»ºç«‹ä¸€ä¸ªä¿å­˜çŠ¶æ€çš„å¤‡å¿˜å½•å¯¹è±¡ç”¨æ¥å­˜å‚¨åˆ°å¤‡å¿˜å½•ç®¡ç†è€…å¯¹è±¡ä¸­ä»¥ä¾¿éšæ—¶å–å‡ºçŠ¶æ€å¤‡å¿˜å½•è¿›è¡ŒçŠ¶æ€çš„æ¢å¤ã€‚ç°åœ¨å‡è®¾æ¸¸æˆä¸­çš„æŸä¸ªåœºæ™¯ï¼Œä¸€ä¸ªæ¸¸æˆè§’è‰²æœ‰ç”Ÿå‘½åŠ›ã€æ”»å‡»åŠ›å’Œé˜²å¾¡åŠ›ç­‰æ•°æ®ï¼Œåœ¨æ‰“bosså‰å’Œæ‰“bossåä¸€å®šä¼šä¸ä¸€æ ·ï¼Œæˆ‘ä»¬å…è®¸ç©å®¶å¦‚æœæ„Ÿè§‰ä¸bosså†³æ–—çš„æ•ˆæœä¸ç†æƒ³æ—¶è®©æ¸¸æˆæ¢å¤åˆ°å†³æ–—ä¹‹å‰çš„çŠ¶æ€ï¼Œè¿™å°±ä½¿ç”¨äº†å¤‡å¿˜å½•æ¨¡å¼ï¼Œé¦–å…ˆæˆ‘ä»¬ç”¨ç™½ç®±å¤‡å¿˜å½•æ¨¡å¼å®ç°ã€‚

##### ç™½ç®±å¤‡å¿˜å½•æ¨¡å¼

![](https://langwenchong.gitee.io/figure-bed/20211109161626.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°GameRoleè§’è‰²ç±»å¯ä»¥å­˜å‚¨çŠ¶æ€ï¼Œè¿™ä¸ªå­˜å‚¨çŠ¶æ€çš„æ•°æ®å¯¹è±¡å°±æ˜¯RoleStateMentoç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“å¯èƒ½æœ‰æ—¶å€™ä¼šå­˜å‚¨è®¸å¤šä¸ªçŠ¶æ€ï¼Œå…è®¸å¤šæ¬¡å›æ»šå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªçŠ¶æ€å¤‡å¿˜å½•ç®¡ç†è€…å³RoleStateCaretakerèšåˆäº†RoleStateMmentoï¼Œç”¨ä¸€ä¸ªåˆ—è¡¨å­˜å‚¨äº†è®¸å¤šä¸ªçŠ¶æ€ï¼Œå½“GameRoleæ¢å¤æ—¶åªéœ€è¦ä»ä»–è¿™é‡Œè·å–å³å¯ã€‚ä»£ç å¦‚ä¸‹

{% tabs ç™½ç®±å¤‡å¿˜å½• %}

<!-- tab Client.java -->

```java
public class Client {
    public static void main(String[] args) {
        System.out.println("------------å¤§æˆ˜bosså‰----------");

        GameRole gameRole = new GameRole();
        gameRole.initState();//åˆå§‹åŒ–çŠ¶æ€çš„æ“ä½œ
        gameRole.stateDisplay();
        //å°†æ¸¸æˆè§’è‰²çŠ¶æ€è¿›è¡Œå¤‡ä»½
        RoleStateCaretaker roleStateCaretaker = new RoleStateCaretaker();
        roleStateCaretaker.setRoleStateMemento(gameRole.saveState());

        System.out.println("------------å¤§æˆ˜bosså----------------");
        //æŸè€—ä¸¥é‡
        gameRole.fight();
        gameRole.stateDisplay();
//        System.out.println("-------------æ¢å¤ä¹‹å‰çš„çŠ¶æ€-------------------");
        gameRole.recoverState(roleStateCaretaker.getRoleStateMemento());
        System.out.println("--------------æ¢å¤ä¹‹åçš„çŠ¶æ€---------------------");
        gameRole.stateDisplay();
    }
}
```

<!-- endtab -->

<!-- tab GameRole.java -->

```java
//æ¸¸æˆè§’è‰²ç±»ï¼Œå‘èµ·äººè§’è‰²
public class GameRole {
    private int vit;//ç”Ÿå‘½åŠ›
    private int atk;//æ”»å‡»åŠ›
    private int def;//é˜²å¾¡åŠ›

    //åˆå§‹åŒ–å†…éƒ¨çŠ¶æ€æ–¹æ³•
    public void initState() {
        this.vit = 100;
        this.atk = 100;
        this.def = 100;
    }

    //æˆ˜æ–—çš„æ–¹æ³•
    public void fight() {
        this.vit = 0;
        this.atk = 0;
        this.def = 0;

    }

    //ä¿å­˜è§’è‰²çŠ¶æ€åŠŸèƒ½
    public RoleStateMemento saveState() {
        return new RoleStateMemento(vit, atk, def);
    }


    //æ¢å¤è§’è‰²çŠ¶æ€
    public void recoverState(RoleStateMemento roleStateMemento) {
        //å°†å¤‡å¿˜å½•å¯¹è±¡ä¸­å­˜å‚¨çš„çŠ¶æ€èµ‹å€¼ç»™å½“å‰å¯¹è±¡çš„æˆå‘˜
        this.vit = roleStateMemento.getVit();
        this.atk = roleStateMemento.getAtk();
        this.def = roleStateMemento.getDef();
    }

    //å±•ç¤ºçŠ¶æ€åŠŸèƒ½
    public void stateDisplay() {
        System.out.println("è§’è‰²ç”Ÿå‘½åŠ›ï¼š" + vit);
        System.out.println("è§’è‰²ç”Ÿå‘½åŠ›ï¼š" + atk);
        System.out.println("è§’è‰²ç”Ÿå‘½åŠ›ï¼š" + def);
    }

    public int getVit() {
        return vit;
    }

    public void setVit(int vit) {
        this.vit = vit;
    }

    public int getAtk() {
        return atk;
    }

    public void setAtk(int atk) {
        this.atk = atk;
    }

    public int getDef() {
        return def;
    }

    public void setDef(int def) {
        this.def = def;
    }


}
```

<!-- endtab -->

<!-- tab RoleStateMemento.java -->

```java
//å¤‡å¿˜å½•è§’è‰²ç±»
public class RoleStateMemento {
    private int vit;//ç”Ÿå‘½åŠ›
    private int atk;//æ”»å‡»åŠ›
    private int def;//é˜²å¾¡åŠ›

    public RoleStateMemento(int vit, int atk, int def) {
        this.vit = vit;
        this.atk = atk;
        this.def = def;
    }

    public RoleStateMemento() {
    }

    public int getVit() {
        return vit;
    }

    public void setVit(int vit) {
        this.vit = vit;
    }

    public int getAtk() {
        return atk;
    }

    public void setAtk(int atk) {
        this.atk = atk;
    }

    public int getDef() {
        return def;
    }

    public void setDef(int def) {
        this.def = def;
    }
}
```

<!-- endtab -->

<!-- tab RoleStateCaretaker.java -->

```java
//å¤‡å¿˜å½•ç®¡ç†å¯¹è±¡
public class RoleStateCaretaker {
    //å£°æ˜RoleStateMementoç±»å‹çš„å˜é‡
    private RoleStateMemento roleStateMemento;

    public RoleStateMemento getRoleStateMemento() {
        return roleStateMemento;
    }

    public void setRoleStateMemento(RoleStateMemento roleStateMemento) {
        this.roleStateMemento = roleStateMemento;
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211109162048.png)

æˆ‘ä»¬æ€è€ƒä¸€ä¸‹ä¸Šé¢çš„è¿™ä¸ªç™½ç®±å¤‡å¿˜å½•æ¨¡å¼æœ‰æ²¡æœ‰ä»€ä¹ˆç¼ºé™·ï¼Œå¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªçŠ¶æ€å­˜å‚¨å¯¹è±¡æ˜¯æœ‰è¢«ä¿®æ”¹çš„é£é™©çš„ï¼æ¯”å¦‚æˆ‘ä»¬åœ¨å­˜å‚¨å½“å‰çŠ¶æ€ä¸ºä¸€ä¸ªRoleStateMementoå¯¹è±¡ä»¥åä»–æ˜¯æºå¸¦ç€å¯¹ç”Ÿå‘½å€¼ã€æ”»å‡»åŠ›å’Œé˜²å¾¡åŠ›ç­‰æ•°å€¼çš„ä¿®æ”¹æ–¹æ³•çš„ï¼Œé‚£ä¹ˆä¹Ÿå°±æ„å‘³ç€ä»–åœ¨ä¼ é€’çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«æ¶æ„æ‹¦æˆªç„¶åä¿®æ”¹æ•°å€¼çš„ï¼Œè¿™ä¼šé€ æˆæˆ‘ä»¬çš„æ¸¸æˆå­˜åœ¨è¢«å¤–æŒ‚æ¶æ„ä¿®æ”¹çš„é£é™©ï¼Œæ‰€ä»¥ç™½ç®±å¤‡å¿˜å½•æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„ç¼ºé™·å³å®‰å…¨æ€§å¤ªä½ã€‚å› æ­¤æˆ‘ä»¬æ¥ä¸‹æ¥å¼•å…¥äº†é»‘ç®±å¤‡å¿˜å½•æ¨¡å¼ã€‚

##### é»‘ç®±å¤‡å¿˜å½•æ¨¡å¼

![](https://langwenchong.gitee.io/figure-bed/20211109162620.png)

æˆ‘ä»¬ä¼šå‘ç°æ­¤æ—¶RoleStateMementoç±»ç§°ä¸ºäº†GameRoleç±»çš„ç§æœ‰ç±»ï¼ŒåŒæ—¶ä»–åœ¨ä¼ é€’ä¿å­˜çš„çŠ¶æ€æ—¶ä½¿ç”¨äº†ä¸Šå±‚çš„æ¥å£Mementoæ¥å®ç°çš„ï¼Œè€ŒMementoæ¥å£ç¡®å®ä¸€ä¸ªæ²¡æœ‰ä»»ä½•æ–¹æ³•çš„æ¥å£ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€åœ¨ä¼ é€’è¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ˜¯Mementoç±»å‹æ¥ä¼ é€’ä¿å­˜çš„çŠ¶æ€ï¼Œé‚£ä¹ˆç”±äºMementoæ¥å£æ— æ–¹æ³•ï¼Œä¹Ÿå°±ä¸å¯èƒ½ç›´æ¥å¯¹çŠ¶æ€è¿›è¡Œä¿®æ”¹äº†ã€‚ä½†æ˜¯ä½ è‚¯å®šä¼šåé©³è¯´åªè¦æŠŠMementoå¼ºè½¬ä¸ºRoleStateMementoä¸å°±åˆå¯ä»¥è¿›è¡Œæ•°å€¼ä¿®æ”¹äº†å—ï¼Ÿä½†æ˜¯å®é™…ä¸Šè¿™æ˜¯åšä¸åˆ°çš„ï¼ŒåŸå› æœ‰äºŒï¼š

1. æ­¤æ—¶æˆ‘ä»¬æ˜¯ä»¥ä¸Šå¸è§†è§’æ¥çœ‹è®¾è®¡çš„ï¼Œå› æ­¤æˆ‘ä»¬çŸ¥é“Mementoå¯ä»¥å¼ºè½¬ä¸ºRoleStateMementoç±»çš„ï¼Œä½†æ˜¯åœ¨å®é™…ä¸Šä¼ è¾“ä¸­ï¼Œç”±äºæ¶æ„æ‹¦æˆªè€…å¹¶ä¸æ˜¯å¼€å‘è€…ï¼Œå› æ­¤ä»–å¹¶ä¸çŸ¥é“Mementoä¸‹çš„å…·ä½“å®ç°ç±»ç±»åæ˜¯ä»€ä¹ˆã€‚
2. å³ä½¿æ¶æ„æ‹¦æˆªè€…æ°å·§è’™å¯¹äº†ï¼Œé‚£ä»–ä¹Ÿæ— æƒåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¿›è¡Œå¼ºè½¬ä¿®æ”¹ï¼Œå› ä¸ºRoleStateMementoæ˜¯GameRoleçš„ç§æœ‰ç±»ã€‚åªæœ‰å½“Mementoå®‰å…¨ä¼ åˆ°GameRoleä»¥åæ‰èƒ½ç”±GameRoleè¿›è¡Œå¼ºè½¬ï¼Œå› æ­¤ä¸å­˜åœ¨æ¶æ„ä¿®æ”¹çš„é£é™©äº†ã€‚

{% tabs é»‘ç®±å¤‡å¿˜å½•æ¨¡å¼ %}

<!-- tab Client.java -->

```java
public class Client {
    public static void main(String[] args) {
        System.out.println("------------å¤§æˆ˜bosså‰----------");

        GameRole gameRole = new GameRole();
        gameRole.initState();//åˆå§‹åŒ–çŠ¶æ€çš„æ“ä½œ
        gameRole.stateDisplay();
        //å°†æ¸¸æˆè§’è‰²çŠ¶æ€è¿›è¡Œå¤‡ä»½
        RoleStateCaretaker roleStateCaretaker = new RoleStateCaretaker();
        roleStateCaretaker.setMemento(gameRole.saveState());

        System.out.println("------------å¤§æˆ˜bosså----------------");
        //æŸè€—ä¸¥é‡
        gameRole.fight();
        gameRole.stateDisplay();
//        System.out.println("-------------æ¢å¤ä¹‹å‰çš„çŠ¶æ€-------------------");
        gameRole.recoverState(roleStateCaretaker.getMemento());
        System.out.println("--------------æ¢å¤ä¹‹åçš„çŠ¶æ€---------------------");
        gameRole.stateDisplay();
    }
}
```

<!-- endtab -->

<!-- tab GameRole.java -->

```java
//æ¸¸æˆè§’è‰²ç±»ï¼Œå‘èµ·äººè§’è‰²
public class GameRole {
    private int vit;//ç”Ÿå‘½åŠ›
    private int atk;//æ”»å‡»åŠ›
    private int def;//é˜²å¾¡åŠ›

    //åˆå§‹åŒ–å†…éƒ¨çŠ¶æ€æ–¹æ³•
    public void initState() {
        this.vit = 100;
        this.atk = 100;
        this.def = 100;
    }

    //æˆ˜æ–—çš„æ–¹æ³•
    public void fight() {
        this.vit = 0;
        this.atk = 0;
        this.def = 0;

    }

    //ä¿å­˜è§’è‰²çŠ¶æ€åŠŸèƒ½
    public RoleStateMemento saveState() {
        return new RoleStateMemento(vit, atk, def);
    }


    //æ¢å¤è§’è‰²çŠ¶æ€
    public void recoverState(Memento memento) {
        RoleStateMemento roleStateMemento = (RoleStateMemento) memento;
        //å°†å¤‡å¿˜å½•å¯¹è±¡ä¸­å­˜å‚¨çš„çŠ¶æ€èµ‹å€¼ç»™å½“å‰å¯¹è±¡çš„æˆå‘˜
        this.vit = roleStateMemento.getVit();
        this.atk = roleStateMemento.getAtk();
        this.def = roleStateMemento.getDef();
    }

    //å±•ç¤ºçŠ¶æ€åŠŸèƒ½
    public void stateDisplay() {
        System.out.println("è§’è‰²ç”Ÿå‘½åŠ›ï¼š" + vit);
        System.out.println("è§’è‰²ç”Ÿå‘½åŠ›ï¼š" + atk);
        System.out.println("è§’è‰²ç”Ÿå‘½åŠ›ï¼š" + def);
    }

    public int getVit() {
        return vit;
    }

    public void setVit(int vit) {
        this.vit = vit;
    }

    public int getAtk() {
        return atk;
    }

    public void setAtk(int atk) {
        this.atk = atk;
    }

    public int getDef() {
        return def;
    }

    public void setDef(int def) {
        this.def = def;
    }

    private class RoleStateMemento implements Memento {
        private int vit;//ç”Ÿå‘½åŠ›
        private int atk;//æ”»å‡»åŠ›
        private int def;//é˜²å¾¡åŠ›

        public RoleStateMemento(int vit, int atk, int def) {
            this.vit = vit;
            this.atk = atk;
            this.def = def;
        }

        public int getVit() {
            return vit;
        }

        public void setVit(int vit) {
            this.vit = vit;
        }

        public int getAtk() {
            return atk;
        }

        public void setAtk(int atk) {
            this.atk = atk;
        }

        public int getDef() {
            return def;
        }

        public void setDef(int def) {
            this.def = def;
        }
    }
```

<!-- endtab -->

<!-- tab Memento.java -->

```java
//å¤‡å¿˜å½•æ¥å£ï¼Œå¯¹å¤–æä¾›çª„æ¥å£
public interface Memento {

}
```

<!-- endtab -->

<!-- tab RoleStateCaretaker.java -->

```java
//å¤‡å¿˜å½•ç®¡ç†å¯¹è±¡
public class RoleStateCaretaker {
    //å£°æ˜RoleStateMementoç±»å‹çš„å˜é‡
    private Memento memento;

    public Memento getMomento() {
        return memento;
    }

    public void setMemento(Memento memento) {
        this.memento = memento;
    }

    public Memento getMemento() {
        return memento;
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211109162048.png)

#### è§£é‡Šå™¨æ¨¡å¼

è¿™ä¸ªæ¨¡å¼å¹¶ä¸å¸¸è§ä¹Ÿå¾ˆéš¾ç†è§£å®ç°ï¼Œä»–ä¼šå°†è®¸å¤šä¸åŒçš„åŸå­æ“ä½œè¿›è¡Œæ–‡æ³•å®šä¹‰ï¼Œç„¶ååœ¨è°ƒç”¨æ—¶ä¼ è¿›ç›¸å¯¹åº”çš„è§£é‡Šæ“ä½œå®Œæˆå¤æ‚çš„æ“ä½œã€‚æˆ‘ä»¬ä»¥å®ç°åŠ å‡æ³•çš„è½¯ä»¶å¼€å‘ä¸ºä¾‹ï¼ŒUMLå›¾å¦‚ä¸‹

![](https://langwenchong.gitee.io/figure-bed/20211109163811.png)

è¿™é‡Œæˆ‘ä»¬å‡è®¾ä¸€ä¸ªè®¡ç®—å¼ä¸º`a-(b+(c-d)`ï¼Œé‚£ä¹ˆå¾ˆæ˜æ˜¾æˆ‘ä»¬å¯ä»¥é‡‡ç”¨Minus(left,right)å’ŒPlus(left,right)ä¸¤ä¸ªåŸºç¡€æ“ä½œå åŠ å®Œæˆï¼š

```java
new Minus(a, new Plus(b, new Minus(c, d)))
```

ä½†æ˜¯æˆ‘ä»¬çŸ¥é“Minusçš„ä¸¤ä¸ªå‚æ•°å¹¶ä¸ä¸€å®šæ˜¯å‚æ•°ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªå­è®¡ç®—å¼ï¼Œå› æ­¤æ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦å¼•å…¥è§£é‡Šå™¨æ¨¡å¼äº†ï¼Œä»–å¯ä»¥å¯¹å‡½æ•°çš„å‚æ•°è¿›è¡Œè§£é‡Šï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ä¸€ä¸ªè§£é‡ŠæŸ¥æ‰¾è¡¨mapä¸­æŸ¥æ‰¾åˆ°å¯¹åº”çš„æ•°å€¼ï¼Œå°†å˜é‡è§£é‡Šæˆå¯¹åº”çš„æ•°å€¼ï¼Œå¦‚æœæ²¡æœ‰æŸ¥æ‰¾åˆ°é‚£ä¹ˆå°±æ˜¯è®¡ç®—å¼ï¼Œéœ€è¦è¿›ä¸€æ­¥æ‹†åˆ†ã€‚å› æ­¤æ¯ä¸€æ­¥interpretè§£é‡Šæˆ‘ä»¬éƒ½éœ€è¦ä¸€ä¸ªè§£é‡ŠæŸ¥æ‰¾è¡¨å³contextï¼Œè‡ªæ­¤æˆ‘ä»¬å°±è®¾è®¡å®Œæˆäº†åŠ å‡æ³•è½¯ä»¶

{% tabs è§£é‡Šå™¨æ¨¡å¼ %}

<!-- tab Client.java -->

```java
public class Client {
    public static void main(String[] args) {
        //åˆ›å»ºç¯å¢ƒå¯¹è±¡
        Context context = new Context();
        //ç»™ç¯å¢ƒå¯¹è±¡å­˜å‚¨å˜é‡
        Variable a = new Variable("a");
        Variable b = new Variable("b");
        Variable c = new Variable("c");
        Variable d = new Variable("d");
        context.assign(a, 1);
        context.assign(b, 2);
        context.assign(c, 3);
        context.assign(d, 4);
        //è·å–æŠ½è±¡è¯­æ³•æ ‘
        AbstractExpression abstractExpression = new Minus(a, new Plus(b, new Minus(c, d)));
        int result = abstractExpression.interpret(context);
        System.out.println(abstractExpression + "=" + result);
    }
}
```



<!-- endtab -->

<!-- tab AbstractExpression.java -->

```java
//æŠ½è±¡è¡¨è¾¾å¼ç±»
public abstract class AbstractExpression {
    public abstract int interpret(Context context);
}
```

<!-- endtab -->
<!-- tab Context.java -->

```java
//ç¯å¢ƒè§’è‰²ç±»
public class Context {
    //å®šä¹‰ä¸€ä¸ªMapé›†åˆç”¨æ¥å­˜å‚¨å˜é‡åŠå¯¹åº”çš„å€¼
    private Map<Variable, Integer> map = new HashMap<Variable, Integer>();

    //æ·»åŠ å˜é‡çš„åŠŸèƒ½
    public void assign(Variable variable, Integer value) {
        map.put(variable, value);
    }

    //æ ¹æ®å˜é‡è·å–å¯¹åº”çš„å€¼çš„æ–¹æ³•
    public int getValue(Variable variable) {
        return map.get(variable);

    }
}
```

<!-- endtab -->

<!-- tab Minus.java -->

```java
public class Minus extends AbstractExpression {
    //å‡å·ä¸¤è¾¹çš„è¡¨è¾¾å¼
    private AbstractExpression left;
    private AbstractExpression right;

    public Minus(AbstractExpression left, AbstractExpression right) {
        this.left = left;
        this.right = right;
    }

    @Override
    public int interpret(Context context) {
        //å°†å·¦è¾¹è¡¨è¾¾å¼çš„ç»“æœå’Œå³è¾¹è¡¨è¾¾å¼çš„ç»“æœè¿›è¡Œç›¸å‡
        return left.interpret(context) - right.interpret(context);
    }

    @Override
    public String toString() {
        return "(" + left.toString() + "-" + right.toString() + ")";
    }
}
```

<!-- endtab -->

<!-- tab Plus.java -->

```java
//åŠ å‘è¡¨è¾¾å¼ç±»
public class Plus extends AbstractExpression {
    //åŠ å·ä¸¤è¾¹çš„è¡¨è¾¾å¼
    private AbstractExpression left;
    private AbstractExpression right;

    public Plus(AbstractExpression left, AbstractExpression right) {
        this.left = left;
        this.right = right;
    }

    @Override
    public int interpret(Context context) {
        //å°†å·¦è¾¹è¡¨è¾¾å¼çš„ç»“æœå’Œå³è¾¹è¡¨è¾¾å¼çš„ç»“æœè¿›è¡Œç›¸åŠ 
        return left.interpret(context) + right.interpret(context);
    }

    @Override
    public String toString() {
        return "(" + left.toString() + "+" + right.toString() + ")";
    }
}
```

<!-- endtab -->

<!-- tab Variable.java -->

```java
//å˜é‡ç±»ï¼Œç”¨äºå°è£…å˜é‡çš„ç±»
public class Variable extends AbstractExpression {


    //å£°æ˜å­˜å‚¨å˜é‡åçš„æˆå‘˜å˜é‡
    private String name;

    public Variable(String name) {
        this.name = name;
    }

    @Override
    public int interpret(Context context) {
        //ç›´æ¥è¿”å›å˜é‡çš„å€¼
        return context.getValue(this);
    }

    @Override
    public String toString() {
        return name;
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211109164829.png)

#### çŠ¶æ€æ¨¡å¼

æˆ‘ä»¬ä¸çŠ¶æ€æ¨¡å¼çš„è½¬æ¢æœ€å…ˆæƒ³åˆ°çš„åŠæ³•å°±æ˜¯å¤šä¸ªif-elseåˆ¤æ–­æ¥å®ç°ï¼Œä½†æ˜¯å½“çŠ¶æ€å¤šå¤§ç™¾ç§æ—¶ï¼Œåœ¨ä½¿ç”¨è¿™ç§æ–¹æ³•è‚¯å®šä¸å¤ªåˆé€‚äº†ï¼Œè€Œä¸”æ¯ä¸€æ¬¡å¢åŠ æ–°çŠ¶æ€éƒ½éœ€è¦ä¿®æ”¹æºä»£ç ï¼Œæ›´åˆ«è°ˆæœ‰æ—¶å€™ä¸åŒçš„çŠ¶æ€è¿˜æœ‰æ¡ä»¶çš„é™åˆ¶ï¼Œå› æ­¤æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å°†æ¯ä¸€ä¸ªçŠ¶æ€è®¾ç½®ä¸ºä¸€ä¸ªç±»ï¼Œç„¶åä½¿ç”¨ç±»ä¹‹é—´æ–¹æ³•çš„è°ƒç”¨å®ç°çŠ¶æ€çš„è½¬æ¢ï¼ŒåŒæ—¶æ¯ä¸€ä¸ªçŠ¶æ€é™åˆ¶æ¡ä»¶å†™åˆ°å¯¹åº”çš„ç±»ä¸­å³å¯ï¼Œåˆ†æˆå¤šä¸ªæ¨¡å—æ–¹ä¾¿ç»´æŠ¤ï¼Œæœ€é‡è¦çš„æ˜¯å½“å¤©ä»·æ–°çŠ¶æ€æ—¶æˆ‘ä»¬æ— éœ€é¢‘ç¹çš„å»æ›´æ”¹ä¸»å‡½æ•°ä»£ç ã€‚ç°åœ¨æˆ‘ä»¬å°±ä»¥ç”µæ¢¯æ¥æ¼”ç¤ºä¸€ä¸‹ï¼Œå‡è®¾ç”µæ¢¯æœ‰å¼€é—¨ï¼Œå…³é—¨ï¼Œè¿è¡Œå’Œåœæ­¢å››ä¸ªçŠ¶æ€ï¼ŒåŒæ—¶è¦æ±‚ç”µæ¢¯åœ¨å¼€é—¨æ—¶ç‚¹å‡»è¿è¡Œæ˜¯æ— æ•ˆçš„ï¼Œè¿è¡Œè¿‡ç¨‹ä¸­ç‚¹å‡»å¼€é—¨ä¹Ÿæ˜¯æ— æ•ˆçš„ï¼Œå¹¶ä¸”ç”µæ¢¯é¢‘ç¹çš„åœ¨å››ä¸ªçŠ¶æ€ä¸­è¿›è¡Œåˆ‡æ¢ï¼ŒUMLå›¾å¦‚ä¸‹

![](https://langwenchong.gitee.io/figure-bed/20211109181249.png)

{% tabs çŠ¶æ€æ¨¡å¼ %}

<!-- tab Client.java -->

```java
public class Client {
    public static void main(String[] args) {
        //åˆ›å»ºç¯å¢ƒè§’è‰²å¯¹è±¡
        Context context = new Context();
        //è®¾ç½®å½“å‰ç”µæ¢¯çŠ¶æ€
        context.setLiftState(new RunningState());
        context.open();
        context.close();
        context.run();
        context.stop();
    }
}
```

<!-- endtab -->

<!-- tab Context.java -->

```java
//ç¯å¢ƒè§’è‰²ç±»
public class Context {
    //å®šä¹‰å¯¹åº”çŠ¶æ€çš„å¯¹è±¡å¸¸é‡
    public final static OpeningState OPENING_STATE = new OpeningState();
    public final static ClosingState CLOSING_STATE = new ClosingState();
    public final static RunningState RUNNING_STATE = new RunningState();
    public final static StoppingState STOPPING_STATE = new StoppingState();

    //å½“å‰çŠ¶æ€å˜é‡
    private LiftState liftState;

    public LiftState getLiftState() {
        return liftState;
    }

    public void setLiftState(LiftState liftState) {
        this.liftState = liftState;
        //è®¾ç½®å½“å‰çŠ¶æ€å¯¹è±¡ä¸­çš„Contextå¯¹è±¡
        this.liftState.setContext(this);
    }

    public void open() {
        this.liftState.open();
    }

    public void close() {
        this.liftState.close();
    }

    public void run() {
        this.liftState.run();
    }

    public void stop() {
        this.liftState.stop();
    }
}
```

<!-- endtab -->

<!-- tab LiftState.java -->

```java
//æŠ½è±¡çŠ¶æ€ç±»
public abstract class LiftState {
    //ç¯å¢ƒè§’è‰²ç±»å˜é‡
    protected Context context;

    public void setContext(Context context) {
        this.context = context;
    }

    //ç”µæ¢¯å¼€å¯æ“ä½œ
    public abstract void open();

    //ç”µæ¢¯å…³é—­æ“ä½œ
    public abstract void close();

    //ç”µæ¢¯è¿è¡Œæ“ä½œ
    public abstract void run();

    //ç”µæ¢¯åœæ­¢æ“ä½œ
    public abstract void stop();
}
```

<!-- endtab -->

<!-- tab OpeningState.java -->

```java
public class OpeningState extends LiftState {

    @Override
    public void open() {
        System.out.println("ç”µæ¢¯å¼€å¯");
    }

    @Override
    public void close() {
        super.context.setLiftState(Context.CLOSING_STATE);
        //è°ƒç”¨å½“å‰çŠ¶æ€ä¸­çš„contextä¸­çš„å¯¹åº”çš„closeæ–¹æ³•
        super.context.close();
    }

    @Override
    public void run() {

    }

    @Override
    public void stop() {

    }
}

```

<!-- endtab -->

<!-- tab RunningState.java -->

```java
public class RunningState extends LiftState {

    @Override
    public void open() {

    }

    @Override
    public void close() {

    }

    @Override
    public void run() {
        System.out.println("ç”µæ¢¯å¼€å§‹è¿è¡Œ");
    }

    @Override
    public void stop() {
        super.context.setLiftState(Context.STOPPING_STATE);
        super.context.stop();
    }
}
```

<!-- endtab -->

<!--tab StoppingState.java -->

```java
public class StoppingState extends LiftState {
    @Override
    public void open() {
        super.context.setLiftState(Context.OPENING_STATE);
        super.context.open();
    }

    @Override
    public void close() {
        super.context.setLiftState(Context.CLOSING_STATE);
        super.context.close();
    }

    @Override
    public void run() {
        super.context.setLiftState(Context.RUNNING_STATE);
        super.context.run();
    }

    @Override
    public void stop() {
        System.out.println("ç”µæ¢¯åœæ­¢");
    }
}
```

<!-- endtab -->

<!-- tab ClosingState.java -->

```java
public class ClosingState extends LiftState {
    @Override
    public void open() {
        super.context.setLiftState(Context.OPENING_STATE);
        super.context.open();
    }

    @Override
    public void close() {
        System.out.println("ç”µæ¢¯é—¨å…³é—­");
    }

    @Override
    public void run() {
        super.context.setLiftState(Context.RUNNING_STATE);
        super.context.run();
    }

    @Override
    public void stop() {
        super.context.setLiftState(Context.STOPPING_STATE);
        super.context.stop();
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211109181654.png)

æˆ‘ä»¬å‘ç°è¿™ç§æ¨¡å¼ä¸‹ï¼Œå‡è®¾ç°åœ¨è¦æ·»åŠ ä¸€ä¸ªåœç”µå’Œé€šç”µçŠ¶æ€æ— éœ€ä¿®æ”¹æºä»£ç ï¼Œè€Œåªéœ€è¦å†æ·»åŠ æ–°çš„çŠ¶æ€ã€‚

#### ç­–ç•¥æ¨¡å¼

å‡è®¾ç°åœ¨æœ‰ä¸€å®¶ç™¾è´§å…¬å¸åœ¨å®šå¹´åº¦çš„ä¿ƒé”€æ´»åŠ¨ï¼Œé’ˆå¯¹ä¸åŒçš„èŠ‚æ—¥ï¼ˆæ˜¥èŠ‚ã€ä¸­ç§‹èŠ‚ã€åœ£è¯èŠ‚ï¼‰æ¨å‡ºä¸åŒçš„ä¿ƒé”€æ´»åŠ¨ï¼Œç”±ä¿ƒé”€å‘˜å°†ä¿ƒé”€æ´»åŠ¨å±•ç¤ºç»™å®¢æˆ·ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¦‚ä¸‹è®¾è®¡ï¼š

![](https://langwenchong.gitee.io/figure-bed/20211109194841.png)

ç”±äºä¸‰ç§ç­–ç•¥æ‹¥æœ‰çš„æ–¹æ³•æ€§è´¨æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å®ç°ä¸åŒï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç»Ÿä¸€å®ç°ä¸€ä¸ªStrategyæ¥å£ï¼Œç„¶åå”®è´§å‘˜æ¥èšåˆæ‰€æœ‰çš„ç­–ç•¥ï¼Œæ ¹æ®å…·ä½“çš„æƒ…å†µæ¥åŠ¨æ€åˆ‡æ¢ï¼Œè¿™å°±æ˜¯ç­–ç•¥æ¨¡å¼ï¼Œéå¸¸å®¹æ˜“ç†è§£ã€‚

{% tabs ç­–ç•¥æ¨¡å¼ %}

<!-- tab Client.java -->

```java
public class Client {
    public static void main(String[] args) {
        //æ˜¥èŠ‚æ¥äº†ï¼Œä½¿ç”¨æ˜¥èŠ‚ä¿ƒé”€æ´»åŠ¨
        SalesMan salesMan = new SalesMan(new StrategyA());
        salesMan.salesManShow();
        System.out.println("==============");
        //ä¸­ç§‹èŠ‚æ¥äº†ï¼Œä½¿ç”¨ä¸­ç§‹èŠ‚æ´»åŠ¨
        salesMan.setStrategy(new StrategyB());
        salesMan.salesManShow();
        //åœ£è¯èŠ‚æ¥äº†ï¼Œä½¿ç”¨åœ£è¯èŠ‚æ´»åŠ¨
        salesMan.setStrategy(new StrategyC());
        salesMan.salesManShow();
    }
}
```

<!-- endtab -->

<!-- tab SalesMan.java -->

```java
//ç¯å¢ƒç±»
public class SalesMan {
    //èšåˆç­–ç•¥ç±»å¯¹è±¡
    private Strategy strategy;

    public SalesMan(Strategy strategy) {
        this.strategy = strategy;
    }

    //ç”±ä¿ƒé”€å‘˜å±•ç¤ºä¿ƒé”€æ´»åŠ¨ç»™æ™®é€šç”¨æˆ·
    public void salesManShow() {
        strategy.show();
    }

    public void setStrategy(Strategy strategy) {
        this.strategy = strategy;
    }
}
```

<!-- endtab -->

<!-- tab Strategy.java -->

```java
//æŠ½è±¡ç­–ç•¥ç±»
public interface Strategy {
    void show();
}
```

<!-- endtab -->

<!--  tab StrategyA.java -->

```java
public class StrategyA implements Strategy {
    @Override
    public void show() {
        System.out.println("ä¹°ä¸€é€ä¸€");
    }
}

```

<!-- endtab -->

<!-- tab StrategyB.java -->

```java
public class StrategyB implements Strategy {
    @Override
    public void show() {
        System.out.println("æ»¡200å‡50");
    }
}

```

<!-- endtab -->

<!-- tab StrategyC.java -->

```java
public class StrategyC implements Strategy {
    @Override
    public void show() {
        System.out.println("æ»¡1000å…ƒåŠ ä¸€å…ƒè´­ä¹°ä»»æ„200å…ƒä»¥ä¸‹å•†å“");
    }
}

```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211109195445.png)

#### èŒè´£é“¾æ¨¡å¼

èŒè´£é“¾æ¨¡å¼ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œä»–æœ‰ç‚¹ç±»ä¼¼äºOSä¸­çš„ç´¢å¼•è¡¨ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªè¯·å‡çš„æ¡ˆä¾‹æ¥å­¦ä¹ ï¼šç°åœ¨éœ€è¦å¼€å‘ä¸€ä¸ªè¯·å‡æµç¨‹æ§åˆ¶ç³»ç»Ÿï¼Œè¯·å‡ä¸€å¤©ä»¥ä¸‹çš„å‡åªéœ€è¦å°ç»„é•¿åŒæ„å³å¯ï¼Œè¯·å‡1å¤©åˆ°3å¤©çš„å‡è¿˜éœ€è¦éƒ¨åˆ†ç»ç†ç»Ÿä¸€ï¼Œè¯·å‡3å¤©åˆ°7å¤©è¿˜éœ€è¦æ€»ç»ç†ç»Ÿä¸€ï¼Œè¯·å‡7å¤©ä»¥ä¸Šä¸å­˜åœ¨ï¼ˆæƒ³ä»€ä¹ˆå‘¢ï¼è¯·è¿™ä¹ˆé•¿æ—¶é—´çš„å‡ä½ æ˜¯æƒ³è¢«å¼€é™¤å—ğŸ˜’ï¼‰ã€‚åŒæ—¶å½“è¯·å‡çš„å¤©æ•°è¶…è¿‡å®¡æ‰¹è€…æƒé™æ—¶ï¼Œå®¡æ‰¹è€…ä¼šé»˜è®¤ç»Ÿä¸€ï¼Œå› ä¸ºåæ­£ä½ è¿˜éœ€è¦ç”±ä¸Šçº§å»åˆ¤å®šä½ æ˜¯å¦èƒ½è¯·å‡æˆåŠŸï¼Œå› æ­¤å‡è®¾ä½ è¦è¯·å‡4å¤©ï¼Œé‚£ä¹ˆå°ç»„é•¿æ˜¯ä¸€å®šä¼šåŒæ„çš„ï¼Œä½†æ˜¯ä»–è¿˜ä¼šå°†ä½ çš„è¯·å‡ä¿¡æ¯ä¸ŠæŠ¥ç»™éƒ¨é—¨ç»ç†ï¼Œå¦‚æœéƒ¨é—¨ç»ç†ä¸åŒæ„ï¼Œé‚£ä¹ˆå³ä½¿ç°åœ¨å°ç»„é•¿åŒæ„äº†ä½ ä¹Ÿæ˜¯è¯·å‡å¤±è´¥ã€‚UMLç±»å›¾å¦‚ä¸‹

![](https://langwenchong.gitee.io/figure-bed/20211109200211.png)

æˆ‘ä»¬è¦æ³¨æ„æ¯ä¸€ä¸ªå®¡æ‰¹è€…éƒ½ç»§æ‰¿äº†HandleræŠ½è±¡ç±»ï¼Œç„¶åä»–ä»¬éƒ½å­˜å‚¨äº†ä¸Šä¸€çº§å®ä¾‹ï¼Œä»¥ä¾¿å‘ä¸Šçº§æŠ¥å‘Šï¼Œä½†æ˜¯ä»–å¹¶ä¸ä¼šå­˜å‚¨ä¸Šä¸Šçº§ç”šè‡³ä¸Šä¸Šä¸Šçº§çš„ä¿¡æ¯ï¼Œå³èŒè´£é“¾æ¨¡å¼æ˜¯ç¦æ­¢è·¨çº§çš„ï¼Œè¿™ä¹Ÿä½“ç°äº†`è¿ªç±³ç‰¹åŸåˆ™`ã€‚

{% tabs èŒè´£é“¾æ¨¡å¼ %}

<!-- tab Client.java -->

```java
public class Client {
    public static void main(String[] args) {
        //åˆ›å»ºè¯·å‡æ¡
        leaveResquest leaveResquest = new leaveResquest("å°æ˜", 6, "èº«ä½“ä¸é€‚");
        //åˆ›å»ºå„çº§é¢†å¯¼å¯¹è±¡
        GroupLeader groupLeader = new GroupLeader();
        Manager manager = new Manager();
        GeneralManager generalManager = new GeneralManager();
        //è®¾ç½®å¤„ç†é“¾
        groupLeader.setNextHandler(manager);
        manager.setNextHandler(generalManager);
        //æäº¤è¯·å‡æ¡
        groupLeader.submit(leaveResquest);
    }
}
```

<!-- endtab -->

<!-- tab Handler.java -->

```java
public abstract class Handler {
    protected final static int NUM_ONE = 1;
    protected final static int NUM_THREE = 3;
    protected final static int NUM_SEVEN = 7;

    //è¯¥é¢†å¯¼å¤„ç†çš„è¯·å‡å¤©æ•°åŒºé—´
    private int numStart;
    private int numEnd;

    //å£°æ˜åç»§è€…ï¼ˆå£°æ˜ä¸Šçº§é¢†å¯¼ï¼‰
    private Handler nextHandler;

    public Handler(int numStart) {
        this.numStart = numStart;
    }

    public Handler(int numStart, int numEnd) {
        this.numStart = numStart;
        this.numEnd = numEnd;
    }

    //è®¾ç½®ä¸Šçº§é¢†å¯¼å¯¹è±¡
    public void setNextHandler(Handler nextHandler) {
        this.nextHandler = nextHandler;
    }

    //å„çº§é¢†å¯¼å¤„ç†è¯·å‡æ¡çš„æ–¹æ³•
    protected abstract void handlderLeave(leaveResquest leaveResquest);

    //æäº¤è¯·å‡æ¡
    public final void submit(leaveResquest leaveResquest) {
        //é¢†å¯¼å…ˆè¿›æ€§å®¡æ‰¹æ˜¯å¦é€šè¿‡
        if (this.nextHandler != null && leaveResquest.getNum() > this.numEnd) {
            //æäº¤ç»™ä¸Šçº§é¢†å¯¼è¿›è¡Œå®¡æ‰¹
            System.out.println("æäº¤è‡³ä¸Šçº§å®¡æ ¸");
            this.nextHandler.submit(leaveResquest);
        } else {
            this.handlderLeave(leaveResquest);
            System.out.println("æµç¨‹ç»“æŸï¼");
        }
    }
}
```

<!-- endtab -->

<!-- tab GroupLeader.java -->

```java
//å°ç»„é•¿ç±»
public class GroupLeader extends Handler {

    public GroupLeader() {
        super(0, Handler.NUM_ONE);
    }

    @Override
    protected void handlderLeave(leaveResquest leaveResquest) {
        System.out.println(leaveResquest.getName() + "è¯·å‡" + leaveResquest.getNum() + "å¤©,ç†ç”±æ˜¯" + leaveResquest.getContent());
        System.out.println("å°ç»„é•¿å®¡æ‰¹ï¼Œå®¡æ‰¹åŒæ„");
    }
}
```

<!-- endtab -->

<!-- tab Manager.java -->

```java
public class Manager extends Handler {
    public Manager() {
        super(Handler.NUM_ONE, Handler.NUM_THREE);
    }

    @Override
    protected void handlderLeave(leaveResquest leaveResquest) {
        System.out.println(leaveResquest.getName() + "è¯·å‡" + leaveResquest.getNum() + "å¤©,ç†ç”±æ˜¯" + leaveResquest.getContent());
        System.out.println("éƒ¨é—¨ç»ç†å®¡æ‰¹ï¼Œå®¡æ‰¹åŒæ„");
    }
}
```

<!-- endtab -->

<!-- tab GeneralManager.java -->

```java
public class GeneralManager extends Handler {
    public GeneralManager() {
        super(Handler.NUM_THREE, Handler.NUM_SEVEN);
    }

    @Override
    protected void handlderLeave(leaveResquest leaveResquest) {
        System.out.println(leaveResquest.getName() + "è¯·å‡" + leaveResquest.getNum() + "å¤©,ç†ç”±æ˜¯" + leaveResquest.getContent());
        System.out.println("æ€»ç»ç†å®¡æ‰¹ï¼Œå®¡æ‰¹åŒæ„");
    }
}
```

<!-- endtab -->

<!-- tab LeaveRequest.java -->

```java
//è¯·å‡æ¡
public class leaveResquest {
    //è¯·å‡äººå‘˜å§“å
    private String name;

    //è¯·å‡å¤©æ•°
    private int num;
    //è¯·å‡å†…å®¹

    private String content;

    public leaveResquest(String name, int num, String content) {
        this.name = name;
        this.num = num;
        this.content = content;
    }

    public String getName() {
        return name;
    }

    public int getNum() {
        return num;
    }

    public String getContent() {
        return content;
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211109201032.png)

#### è®¿é—®è€…æ¨¡å¼

ç°åœ¨å…»å® ç‰©çš„äººå¾ˆå¤šï¼Œå½“ç„¶å® ç‰©æœ‰ç‹—ã€çŒ«ç­‰ç­‰ï¼Œè¦ç»™å® ç‰©å–‚é£Ÿçš„è¯ï¼Œä¸»äººå¯ä»¥å–‚é£Ÿï¼Œå…¶ä»–äººä¹Ÿå¯ä»¥å–‚é£Ÿï¼Œå› æ­¤æ­¤æ—¶æ¯ä¸€ä¸ªå® ç‰©éƒ½ä¼šè¢«è®¸å¤šè®¿é—®è€…è®¿é—®ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å¯èƒ½ä¸ºæ¯ä¸€ä¸ªäººéƒ½åˆ›å»ºä¸€ä¸ªæ¥å£ï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨è®¿é—®è€…æ¨¡å¼äº†ï¼Œä»–å¯ä»¥å…è®¸ä½¿ç”¨æœ‰é™ä¸ªæ–¹æ³•ä½¿å¾—è¯¥ç±»å®ä¾‹è¢«å¤šç§å¤šæ ·çš„å®ä¾‹æ‰€è®¿é—®ã€‚UMLå›¾å¦‚ä¸‹

![](https://langwenchong.gitee.io/figure-bed/20211109201508.png)

{% tabs è®¿é—®è€…æ¨¡å¼ %}

<!-- tab Client.java -->

```java
public class Client {
    public static void main(String[] args) {
        //åˆ›å»ºHomeå¯¹è±¡
        Home home = new Home();
        home.add(new Dog());
        home.add(new Cat());
        Owner owner = new Owner();
        home.action(owner);
    }
}
```

<!-- endtab -->

<!-- tab Animal.java -->

```java

//æŠ½è±¡å…ƒç´ è§’è‰²ç±»
public interface Animal {
    //æ¥æ”¶è®¿é—®è€…è®¿é—®çš„åŠŸèƒ½
    void accept(Person person);


}
```

<!-- endtab -->

<!-- tab Cat.java -->

```java
public class Cat implements Animal {
    @Override
    public void accept(Person person) {
        //è®¿é—®è€…å–‚é£Ÿå® ç‰©çŒ«
        person.feed(this);
        System.out.println("å¥½å¥½åƒï¼Œå–µå–µå–µ");
    }
}
```

<!-- endtab -->

<!-- tab Dog.java -->

```java
public class Dog implements Animal {
    @Override
    public void accept(Person person) {
        //è®¿é—®è€…å–‚é£Ÿå® ç‰©çŒ«
        person.feed(this);
        System.out.println("å¥½å¥½åƒï¼Œæ±ªæ±ªæ±ª");
    }
}

```

<!-- endtab -->

<!-- tab Person.java -->

```java
//æŠ½è±¡è®¿é—®è€…è§’è‰²ç±»
public interface Person {
    //å–‚é£Ÿå® ç‰©
    void feed(Cat cat);

    void feed(Dog dog);
}
```

<!-- endtab -->

<!-- tab Owner.java -->

```java
public class Owner implements Person {

    @Override
    public void feed(Cat cat) {
        System.out.println("ä¸»äººå–‚çŒ«");
    }

    @Override
    public void feed(Dog dog) {
        System.out.println("ä¸»äººå–‚ç‹—");
    }
}
```

<!-- endtab -->

<!-- tab Someone.java -->

```java
public class Someone implements Person {
    @Override
    public void feed(Cat cat) {
        System.out.println("å…¶ä»–äººå–‚çŒ«");
    }

    @Override
    public void feed(Dog dog) {
        System.out.println("å…¶ä»–äººå–‚ç‹—");
    }
}
```

<!-- endtab -->

<!-- tab Home.java -->

```java
public class Home {
    //å£°æ˜ä¸€ä¸ªé›†åˆå¯¹è±¡ç”¨æ¥å­˜å‚¨å…ƒç´ å¯¹è±¡
    private List<Animal> nodeList = new ArrayList<Animal>();

    //æ·»åŠ å…ƒç´ çš„åŠŸèƒ½
    public void add(Animal animal) {
        nodeList.add(animal);
    }

    public void action(Person person) {
        //éå†é›†åˆï¼Œè·å–æ¯ä¸€ä¸ªå…ƒç´ å¯¹è±¡ã€‚è®©è®¿é—®è€…è®¿é—®æ¯ä¸€ä¸ªå…ƒç´ 
        for (Animal animal : nodeList) {
            animal.accept(person);
        }
    }
}
```

<!-- endtab -->

{% endtabs %}

![](https://langwenchong.gitee.io/figure-bed/20211109201834.png)

**æ‚¨å¯ä»¥ç‚¹å‡»ä¸‹æ–¹é“¾æ¥è·å–ä¸Šé¢æ•™ç¨‹æ‰€ä½¿ç”¨çš„ä»£ç ,åŒæ—¶å¯ä»¥å‚è€ƒæœ¬ç¯‡åšå®¢å®Œæˆhomework03å®éªŒå·©å›ºå­¦ä¹ ğŸ˜Š**

{% link è®¾è®¡æ¨¡å¼ä»£ç ä»“åº“ , https://github.com/Langwenchong/DesignPattern %}