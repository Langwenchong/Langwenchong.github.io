---
title: 计算机系统基础大作业--机组原理大闯关
comments: false
top: false
date: 2020-10-23 11:21:37
tags: [机组原理,C++,linux]
categories: 
	- [知识分享,项目总结]
headimg: https://langwenchong.gitee.io/figure-bed/20210704172856.png
---

一共8道题，请在文档中给出每道题的计算结果并说明计算思路（最后一题只需要给出结果 即可）, 请在文档中答题.

作业文件下载:链接：https://pan.baidu.com/s/1DRQPRjtY-GVelDRbiW4sVA 
提取码：hhro 

<!-- more -->

### 解题思路

#### question1

![](https://pic.imgdb.cn/item/5f92a2631cd1bbb86bf7ff12.jpg)

A: 插入单个寄存器会得到一个两级管道。为了最大化吞吐量，寄存器应该插入到哪里?吞吐量和延迟是多少?

答案：周期：190s,吞吐量:5.26GIPS,延迟:380ps

思路：尽量是两部分均等，即将ABC划分为一体，DEF划分为一体，所以寄存器插入到ABC之后，此时ABC+寄存器的延迟为190px，DEF+寄存器的延迟为150ps,周期取决于最长时间，所以周期为190ps，而延迟就是2*190=380ps.

B: 在哪里应该插入两个寄存器以最大限度地提高三倍管道的吞吐量?吞吐量和延迟是多少?

答案：周期：130ps,吞吐量：7.69GIPS，延迟：390ps

思路：尽量使其三等分即可，所以AB，CD，EF个位一个部分，所以两个寄存器分别插入AB，CD的后面，此时AB+寄存器位130ps，CD+寄存器位130ps,EF+寄存器位100ps,所以周期为130ps,延迟为390ps.

C: 为了最大限度地提高4级管道的吞吐量，应该在哪里插入3个寄存器?吞吐量和延迟是多少?

答案：周期：110ps，吞吐量：9.09GIPS，延迟：440ps

思路：在A后面插入寄存器，在C后面插入寄存器，在D后面插入寄存器，此时A+寄存器延迟为100ps，BC+寄存器延迟为110ps,D+寄存器延迟为70ps,EF+寄存器延迟为100ps,所以周期为110ps,延迟为440ps。

D: 能产生具有最大可实现吞吐量的设计的最小阶段数是多少?描述此设计、其吞吐量和延迟?

答案：A、B、C、D后面个插入一个寄存器，剩余的EF视为一体。

思路：观察A可知即使A自己成为一体也要100ps,所以尽量要使周期靠近100ps且不能超过100ps,所以B、C、D、后面个插入一个寄存器，然后EF+寄存器刚刚好好组成延迟100，所以整体的周期为100ps，延迟为500ps,吞吐量为10GIPS。

#### question2

![](https://pic.imgdb.cn/item/5f92a2991cd1bbb86bf80af8.jpg)

A：作为k的函数，系统的延迟和吞吐量是多少?

答案：就是问如果将其分成K个部分，求总吞吐量和延迟，可知每插入一个寄存器加长20ps延迟，所以总延迟为（300+20\*k）ps,吞吐量为1000k/(300+20*k)GIPS

B: 吞吐量的最终限制是什么?

答案：伴随着寄存器插入的数量递增，寄存器的延迟将会成为主要因素，所以周期会逐渐趋近于20ps,所以最终吞吐量的极限将是1000/20=50GIPS

#### question3

一个有2个磁盘盘、10,000个柱面(磁道)、平均每个磁道400个扇区和每个扇区512字节的磁盘的容量是多少?

答案：全部相乘即可得到结果，2*2*10000\*400\*512=8.192GB

#### question4

估计访问下列磁盘上扇区的平均时间(以ms为单位):

![](https://pic.imgdb.cn/item/5f92a2cc1cd1bbb86bf81615.jpg)

第一行为转速：1500RPM，即每分钟1500转，第二行为平均寻道时间：8ms,第三行为扇区平均数量：500

答案：每分钟1500转速，所以一转是平均时间60/1500/2=2ms,然后平均转到时间又是8ms,平均传送时间为4/500ms=0.008ms，所以读取一个扇区的平均时间为10.008ms.

#### question5

假设一个由512字节的逻辑块组成的1 MB文件被存储在一个具有以下特征的磁盘驱动器上:

![](https://pic.imgdb.cn/item/5f92a2ea1cd1bbb86bf819f8.jpg)

对于下面的每一种情况，假设一个程序依次读取文件的逻辑块，并且在第一个块上放置磁头的时间是Tavg seek + Tavg rotation。

A: 最佳情况:根据逻辑块到磁盘扇区的最佳映射，估计读取文件所需的最佳时间(以ms为单位)。顺序)。

答案：因为1MB的文件是有2000个512字节的扇区存储的，所以最理想的情况就是文件的2000个扇区连续分布在两个相邻磁道上。此时的时间为平均旋转时间+平均寻道时间+2000个连续扇区的传送时间：30/10+5+（60/10）*2=20ms所以最理想情况为20ms.

B: 随机情况:如果块随机映射到磁盘扇区，估计读取文件所需的时间(以ms为单位)。

答案：此时2000个扇区随机分布，不能保证连续分布，所以先求一个扇区的所需时间，即平均旋转时间+平均寻道时间+一个扇区的传送时间，然后在乘2000，所以总时间为2000*（3+5）+12=16012ms

#### question6

图中的三个函数以不同的空间局部性程度执行相同的操作。根据每个人所享有的空间局部性对功能进行排序。解释你是如何获得你的排名的

![](https://pic.imgdb.cn/item/5f92a30f1cd1bbb86bf81fa5.jpg)

Clear1第一，clear2第二，clear3第三

原因：clear1每次都是以1为步长进行，且先访问完vel在访问的acc没有从vel到acc的频繁跳转访问，而clear2总是频繁进行两个数组的跳转访问因此回避clear1差一点，而clear3虽然访问数组的步长不是1，但是却总是在p,vel,acc之间频发跳转访问，所以比clear3还差。

#### question7

假设一个假设的缓存(S, E, B, m) = (512, 1, 32, 32) (m是地址宽度)，使用地址的高阶S位作为集合索引。对于这样的高速缓存，连续的内存块被映射到相同的高速缓存集A：每个连续数组块中有多少块?

> 假设一个计算机系统每个存储器地址有m位，形成M=2^m个不同的地址。这样一个机器的高速缓存被组织成一个有S=2^s个高速缓存组（cache set）。每个高速缓存组包含E个高速缓存行（cache line）。每个高速缓存行由一个B=2^b字节的高速缓存块（block）、一个有效位（valid bit：指明这个行是否包含有意义的信息），还有t=m-（b+s）个标记位（唯一的标识存储在这个高速缓存行中的高速缓存块）。      
>
> -----查询自知乎

上面的知识点有点遗忘，查了查就会了，设标记位数为t，则每个连续的数组片中有2^t个块，此题中t=32-9-5=18，所以每个数组片中有2^18个块。、

B：考虑在此系统上运行的以下代码。在任何时间点，缓存中存储的数组块的最大数量是多少? 

<img src="https://pic.imgdb.cn/item/5f92a3441cd1bbb86bf82949.jpg" style="zoom:150%;" />



分析上图代码，知道组索引为9，块偏移为5，所以标记为18，所以数组中前2^18个块都会进入第0组，每个块为32bytes，数组只有4096*4/32 = 512个块 < 2^18个块，所以数组元素只能映射到一组里，所以高速缓存中最多只能保存一个数组块。

Question8： 

0 1 1 1 0 0 0 1 1 0 1 0 0

0

5

71

是

0B